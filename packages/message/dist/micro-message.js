/*! For license information please see micro-message.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["micro-message"]=e():t["micro-message"]=e()}(self,(()=>(()=>{var t={244:()=>{},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},c=[],a=0;a<t.length;a++){var u=t[a],s=r.base?u[0]+r.base:u[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var p=n(f),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var h=o(d,r);r.byIndex=a,e.splice(a,0,{identifier:f,updater:h,references:1})}c.push(f)}return c}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var c=0;c<i.length;c++){var a=n(i[c]);e[a].references--}for(var u=r(t,o),s=0;s<i.length;s++){var l=n(i[s]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=u}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},744:(t,e)=>{"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[t,r]of e)n[t]=r;return n}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0;var r={};return(()=>{"use strict";function t(t){var e=t.search.slice(1),n={};return e.split("&").map((function(t){return t.split("=")})).forEach((function(t){n[t[0]]=t[1]})),n}n.r(r),n.d(r,{ChainRunner:()=>v,Channel:()=>$,connector:()=>fr,default:()=>pr,getParams:()=>t,onLoad:()=>m,onMessage:()=>b,onPageHide:()=>g,requestDom:()=>U});const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const i=new Uint8Array(16);function c(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}const a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));const u=function(t,n,r){if(e.randomUUID&&!n&&!t)return e.randomUUID();const o=(t=t||{}).random||(t.rng||c)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(let t=0;t<16;++t)n[r+t]=o[t];return n}return function(t,e=0){return(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase()}(o)};function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function y(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return d(this,o),r.call(this)}return y(o,[{key:"push",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s(f(o.prototype),"push",this).call(this,t,e)}},{key:"use",value:function(t){return this.push(t)}},{key:"run",value:function(t){return this.queue.reduce((function(t,e,n){return e(t)}),t)}}]),o}(function(){function t(e){d(this,t),this.queue=void 0===e?[]:new Array(e)}return y(t,[{key:"push",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n&&this.queue.push(t),1===n&&this.queue.unshift(t),function(){return e.queue.splice(e.queue.findIndex((function(e){return e===t})),1)}}}]),t}());function g(t){return console.log("page hide-------------------------------"),window.addEventListener("pagehide",t),function(){return window.removeEventListener("pagehide",t)}}function m(t){return window.addEventListener("load",t),function(){return window.removeEventListener("load",t)}}function b(t){return window.addEventListener("message",t),function(){return window.removeEventListener("message",t)}}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S(t,e,n){return(e=P(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===w(e)?e:String(e)}var x=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targetOrigin=n.targetOrigin||"*",this.timeout=n.timeout||3e3,this.tag=n.namespace||"gislife",this.defaultResponseInterceptor=new v,this.requestInterceptor=new v,this._cancel=this._initResponse()}var e,n;return e=t,(n=[{key:"_initResponse",value:function(){var t=this;return b((function(e){var n;!1===(null===(n=e.data)||void 0===n?void 0:n.response)&&e.source.postMessage(O(O({},t.defaultResponseInterceptor.run(e.data)),{},{response:!0}),e.origin)}))}},{key:"_postMessage",value:function(t,e){var n=this,r=t.timeout||this.timeout,o=!1;if(e){var i,c,a=u(),s=b((function(t){var e=t.data;(null==e?void 0:e.id)===a&&e.belong===n.tag&&(o=!0,i(e.data),s())}));return new Promise((function(u,l){i=u,c=l;var f=n.requestInterceptor.run(t);e.postMessage({id:a,data:f,belong:n.tag,response:!1},"*"),setTimeout((function(){o||(c("-----postMessage timeout,target maybe not ready"),s())}),r)}))}return Promise.reject("missing target")}},{key:"send",value:function(t,e){return this._postMessage(e,t).then((function(t){return t}),(function(t){return Promise.reject(t)}))}},{key:"on",value:function(t){var e=this;return b((function(n){var r,o;(null==n||null===(r=n.data)||void 0===r?void 0:r.belong)===e.tag&&!1===(null===(o=n.data)||void 0===o?void 0:o.response)&&t(n.data.data)}))}},{key:"destory",value:function(){this._cancel()}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),E=["state","config","callback","emit","register","unregister"],k="URL_CONFIG";function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},L.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}window[k]={test:"test"};var M=new Map,F=new WeakMap,N=new Map,$=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I(t)}(this,t)});function c(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t,n)).appCode=n.appCode,e.localStorageName=n.localStorageName||"globalConfig",e._configResponse(I(e)),e._stateResponse(I(e)),e}return e=c,(n=[{key:"setAppCode",value:function(t){var e,n,r=this;this.appCode=t,null===(e=this.__pageHideCancel)||void 0===e||e.call(this),null===(n=this.__maintainCancel)||void 0===n||n.call(this),window.parent!==window&&(window.parent.postMessage("message","*"),this.send(window.parent,{target:"parent",type:"register"}).then((function(t){return r.send(window.parent,{target:"main",type:"config"})})).then((function(t){localStorage.setItem(r.localStorageName,JSON.stringify(t.data))}))),this.__maintainCancel=this.on((function(t){var e=t.sourceCode;if("register"===t.type){var n=document.getElementById("gislife-"+e);n?r.registerApp(e,n):console.error("register error, can not find element")}})),this.__cancelPassive=this._onPassive()}},{key:"send",value:function(t,e){var n=this;if(e.sourceCode=void 0===e.sourceCode?this.appCode:e.sourceCode,e.pop=void 0===e.pop||e.pop,t)return L(A(c.prototype),"send",this).call(this,t,e);var r=window.parent!==window?[window.parent]:[],o=[];return M.forEach((function(t,e){o.push(t.contentWindow)})),Promise.all(r.concat(o).map((function(t){return L(A(c.prototype),"send",n).call(n,t,e)})))}},{key:"on",value:function(t){var e=this;return L(A(c.prototype),"on",this).call(this,(function(n){if(!n.target)throw Error("on message error, missing msg target");n.target!==e.appCode&&"parent"!==n.target||t(n)}))}},{key:"registerApp",value:function(t,e){M.has(t)||(M.set(t,e),F.set(e,t))}},{key:"unRegisterApp",value:function(t){return console.log("unregister",t),M.delete(t)}},{key:"getApp",value:function(t){var e;if(t instanceof HTMLIFrameElement){var n=F.get(t);n&&(e=[n,tar])}if("string"==typeof t){var r=F.get(t);r&&(e=[tarCode,r])}return e||console.warn("getApp error,target named:",t,M),e}},{key:"destory",value:function(){this.__maintainCancel(),this.__pageHideCancel(),L(A(c.prototype),"destory",this).call(this)}},{key:"getState",value:function(t){return N.get(t)}},{key:"setState",value:function(t,e){return N.set(t,e)}},{key:"_configResponse",value:function(t){var e=this;t.defaultResponseInterceptor.push((function(t){var n;if("config"===(null==t||null===(n=t.data)||void 0===n?void 0:n.type)){var r=JSON.parse(localStorage.getItem(e.localStorageName));t.data.data=window[k]||r}return t}))}},{key:"_onPassive",value:function(){var t=this;return L(A(c.prototype),"on",this).call(this,(function(e){"parent"!==e.target&&"state"!==e.type&&e.target!==t.appCode&&("main"===t.appCode&&(e.pop=!1),"main"===e.target?window.parent!==window&&t.send(window.parent,e):(M.forEach((function(n,r){r!==e.sourceCode&&t.send(n.contentWindow,e)})),window.parent!==window&&!0===e.pop&&t.send(window.parent,e)))}))}},{key:"_stateResponse",value:function(t){t.defaultResponseInterceptor.use((function(t){return"state"===t.data.type&&(t.data.data=N.get(t.data.sourceCode)),t}))}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(x);function U(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return Boolean(t)},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"requestAnimationFrame";function o(t,e,r){if(!(document&&window&&window.requestAnimationFrame))throw Error("browser don't support");var i=document.getElementById(t);if(n(i))return e(i);"requestAnimationFrame"===r&&requestAnimationFrame((function(){o(t,e,r)})),"setTimeout"===r&&setTimeout((function(){o(t,e,r)}))}return new Promise((function(n){e=n,o(t,(function(t){setTimeout((function(){e(t)}))}),r)}))}function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},W.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(r);if(o){var n=G(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,t,e)}return e=c,(n=[{key:"$send",value:function(t){var e;if(!t.target||!t.type)throw Error("message syntax error");var n=t.target;if(("main"===n||"parent"===n)&&window.parent!==window)return e=window.parent,W(G(c.prototype),"send",this).call(this,e,t);var r=this.getApp(n);return n instanceof HTMLIFrameElement&&r&&(t.target=r[0],e=n.contentWindow),"string"==typeof n&&r&&(e=r[1].contentWindow),e||console.warn("current layer target not exist"),W(G(c.prototype),"send",this).call(this,e,t)}},{key:"$on",value:function(t,e,n){var r;if("string"!=typeof e&&"function"!=typeof e)throw Error("type parma type error");return"function"==typeof e?r=W(G(c.prototype),"on",this).call(this,(function(t){e(t)})):E.includes(e)?r=W(G(c.prototype),"on",this).call(this,(function(t){t.type===e&&n(t.data)})):(t&&t.$on("hook:beforeDestory",(function(){var t;null===(t=r)||void 0===t||t()})),void console.error("type not support,current type is:"+e))}},{key:"sendCallback",value:function(t,e,n){if("function"!=typeof e||void 0===n)throw Error("callback or params type error");if(!t)throw Error("missing target");return this.$send({type:"callback",target:t,data:{callback:e.toString(),params:n}})}},{key:"onCallback",value:function(t,e){return this.$on(t,(function(t){if("callback"===t.type){var n=t.data;if(null!==n.params){var r=Object.keys(n.params),o=Object.values(n.params),i=Function.apply(void 0,r.concat(["(".concat(n.callback,")(").concat(r.join(","),")")]));e((function(t){i.apply(t,o)}))}else{var c=Function("(".concat(n.callback,")()"));e((function(t){c.apply(t)}))}}}))}},{key:"onState",value:function(t,e){return this.$send({target:"parent",type:"state"}).then((function(e){return t(e.data)})),this.$on(e,(function(e){if("state"===e.type){var n=e.data;t(n)}}))}},{key:"getConfig",value:function(){var t=localStorage.getItem(this.localStorageName);if(t){var e=JSON.parse(t);return Promise.resolve(e)}return this.$send({type:"config",target:"main"})}},{key:"sendState",value:function(t,e){return this.setState(t,e),this.$send({type:"state",target:t,data:e})}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}($);function z(t,e){const n=Object.create(null),r=t.split(",");for(let t=0;t<r.length;t++)n[r[t]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}function H(t){if(at(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=ft(r)?K(r):H(r);if(o)for(const t in o)e[t]=o[t]}return e}return ft(t)||dt(t)?t:void 0}const J=/;(?![^(]*\))/g,Z=/:(.+)/;function K(t){const e={};return t.split(J).forEach((t=>{if(t){const n=t.split(Z);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Y(t){let e="";if(ft(t))e=t;else if(at(t))for(let n=0;n<t.length;n++){const r=Y(t[n]);r&&(e+=r+" ")}else if(dt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Q={},X=[],tt=()=>{},et=/^on[^a-z]/,nt=t=>et.test(t),rt=Object.assign,ot=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},it=Object.prototype.hasOwnProperty,ct=(t,e)=>it.call(t,e),at=Array.isArray,ut=t=>"[object Map]"===vt(t),st=t=>"[object Set]"===vt(t),lt=t=>"function"==typeof t,ft=t=>"string"==typeof t,pt=t=>"symbol"==typeof t,dt=t=>null!==t&&"object"==typeof t,ht=t=>dt(t)&&lt(t.then)&&lt(t.catch),yt=Object.prototype.toString,vt=t=>yt.call(t),gt=t=>vt(t).slice(8,-1),mt=t=>"[object Object]"===vt(t),bt=t=>ft(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,wt=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},_t=/-(\w)/g,Ot=(wt((t=>t.replace(_t,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),St=(wt((t=>t.replace(Ot,"-$1").toLowerCase())),wt((t=>t.charAt(0).toUpperCase()+t.slice(1)))),jt=(wt((t=>t?`on${St(t)}`:"")),(t,e)=>!Object.is(t,e)),Pt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})};const xt=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Et=t=>(t.w&Lt)>0,kt=t=>(t.n&Lt)>0,Rt=new WeakMap;let Ct=0,Lt=1;const Tt=30;let It;const At=Symbol(""),Mt=Symbol("");class Ft{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,function(t,e=undefined){e&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();let t=It,e=$t;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=It,It=this,$t=!0,Lt=1<<++Ct,Ct<=Tt?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Lt})(this):Nt(this),this.fn()}finally{Ct<=Tt&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];Et(o)&&!kt(o)?o.delete(t):e[n++]=o,o.w&=~Lt,o.n&=~Lt}e.length=n}})(this),Lt=1<<--Ct,It=this.parent,$t=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){It===this?this.deferStop=!0:this.active&&(Nt(this),this.onStop&&this.onStop(),this.active=!1)}}function Nt(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let $t=!0;const Ut=[];function Dt(){Ut.push($t),$t=!1}function qt(){const t=Ut.pop();$t=void 0===t||t}function Wt(t,e,n){if($t&&It){let e=Rt.get(t);e||Rt.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=xt()),function(t,e){let n=!1;Ct<=Tt?kt(t)||(t.n|=Lt,n=!Et(t)):n=!t.has(It),n&&(t.add(It),It.deps.push(t))}(r)}}function Bt(t,e,n,r,o,i){const c=Rt.get(t);if(!c)return;let a=[];if("clear"===e)a=[...c.values()];else if("length"===n&&at(t))c.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(c.get(n)),e){case"add":at(t)?bt(n)&&a.push(c.get("length")):(a.push(c.get(At)),ut(t)&&a.push(c.get(Mt)));break;case"delete":at(t)||(a.push(c.get(At)),ut(t)&&a.push(c.get(Mt)));break;case"set":ut(t)&&a.push(c.get(At))}if(1===a.length)a[0]&&Gt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);Gt(xt(t))}}function Gt(t,e){for(const e of at(t)?t:[...t])(e!==It||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Vt=z("__proto__,__v_isRef,__isVue"),zt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(pt)),Ht=Yt(),Jt=Yt(!0),Zt=Kt();function Kt(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Te(this);for(let t=0,e=this.length;t<e;t++)Wt(n,0,t+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Te)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){Dt();const n=Te(this)[e].apply(this,t);return qt(),n}})),t}function Yt(t=!1,e=!1){return function(n,r,o){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_isShallow"===r)return e;if("__v_raw"===r&&o===(t?e?je:Se:e?Oe:_e).get(n))return n;const i=at(n);if(!t&&i&&ct(Zt,r))return Reflect.get(Zt,r,o);const c=Reflect.get(n,r,o);return(pt(r)?zt.has(r):Vt(r))?c:(t||Wt(n,0,r),e?c:Me(c)?i&&bt(r)?c:c.value:dt(c)?t?xe(c):Pe(c):c)}}function Qt(t=!1){return function(e,n,r,o){let i=e[n];if(Re(i)&&Me(i)&&!Me(r))return!1;if(!t&&!Re(r)&&(Ce(r)||(r=Te(r),i=Te(i)),!at(e)&&Me(i)&&!Me(r)))return i.value=r,!0;const c=at(e)&&bt(n)?Number(n)<e.length:ct(e,n),a=Reflect.set(e,n,r,o);return e===Te(o)&&(c?jt(r,i)&&Bt(e,"set",n,r):Bt(e,"add",n,r)),a}}const Xt={get:Ht,set:Qt(),deleteProperty:function(t,e){const n=ct(t,e),r=(t[e],Reflect.deleteProperty(t,e));return r&&n&&Bt(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return pt(e)&&zt.has(e)||Wt(t,0,e),n},ownKeys:function(t){return Wt(t,0,at(t)?"length":At),Reflect.ownKeys(t)}},te={get:Jt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},ee=t=>t,ne=t=>Reflect.getPrototypeOf(t);function re(t,e,n=!1,r=!1){const o=Te(t=t.__v_raw),i=Te(e);e!==i&&!n&&Wt(o,0,e),!n&&Wt(o,0,i);const{has:c}=ne(o),a=r?ee:n?Ae:Ie;return c.call(o,e)?a(t.get(e)):c.call(o,i)?a(t.get(i)):void(t!==o&&t.get(e))}function oe(t,e=!1){const n=this.__v_raw,r=Te(n),o=Te(t);return t!==o&&!e&&Wt(r,0,t),!e&&Wt(r,0,o),t===o?n.has(t):n.has(t)||n.has(o)}function ie(t,e=!1){return t=t.__v_raw,!e&&Wt(Te(t),0,At),Reflect.get(t,"size",t)}function ce(t){t=Te(t);const e=Te(this);return ne(e).has.call(e,t)||(e.add(t),Bt(e,"add",t,t)),this}function ae(t,e){e=Te(e);const n=Te(this),{has:r,get:o}=ne(n);let i=r.call(n,t);i||(t=Te(t),i=r.call(n,t));const c=o.call(n,t);return n.set(t,e),i?jt(e,c)&&Bt(n,"set",t,e):Bt(n,"add",t,e),this}function ue(t){const e=Te(this),{has:n,get:r}=ne(e);let o=n.call(e,t);o||(t=Te(t),o=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return o&&Bt(e,"delete",t,void 0),i}function se(){const t=Te(this),e=0!==t.size,n=t.clear();return e&&Bt(t,"clear",void 0,void 0),n}function le(t,e){return function(n,r){const o=this,i=o.__v_raw,c=Te(i),a=e?ee:t?Ae:Ie;return!t&&Wt(c,0,At),i.forEach(((t,e)=>n.call(r,a(t),a(e),o)))}}function fe(t,e,n){return function(...r){const o=this.__v_raw,i=Te(o),c=ut(i),a="entries"===t||t===Symbol.iterator&&c,u="keys"===t&&c,s=o[t](...r),l=n?ee:e?Ae:Ie;return!e&&Wt(i,0,u?Mt:At),{next(){const{value:t,done:e}=s.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function pe(t){return function(...e){return"delete"!==t&&this}}function de(){const t={get(t){return re(this,t)},get size(){return ie(this)},has:oe,add:ce,set:ae,delete:ue,clear:se,forEach:le(!1,!1)},e={get(t){return re(this,t,!1,!0)},get size(){return ie(this)},has:oe,add:ce,set:ae,delete:ue,clear:se,forEach:le(!1,!0)},n={get(t){return re(this,t,!0)},get size(){return ie(this,!0)},has(t){return oe.call(this,t,!0)},add:pe("add"),set:pe("set"),delete:pe("delete"),clear:pe("clear"),forEach:le(!0,!1)},r={get(t){return re(this,t,!0,!0)},get size(){return ie(this,!0)},has(t){return oe.call(this,t,!0)},add:pe("add"),set:pe("set"),delete:pe("delete"),clear:pe("clear"),forEach:le(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{t[o]=fe(o,!1,!1),n[o]=fe(o,!0,!1),e[o]=fe(o,!1,!0),r[o]=fe(o,!0,!0)})),[t,n,e,r]}const[he,ye,ve,ge]=de();function me(t,e){const n=e?t?ge:ve:t?ye:he;return(e,r,o)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(ct(n,r)&&r in e?n:e,r,o)}const be={get:me(!1,!1)},we={get:me(!0,!1)},_e=new WeakMap,Oe=new WeakMap,Se=new WeakMap,je=new WeakMap;function Pe(t){return Re(t)?t:Ee(t,!1,Xt,be,_e)}function xe(t){return Ee(t,!0,te,we,Se)}function Ee(t,e,n,r,o){if(!dt(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=o.get(t);if(i)return i;const c=(a=t).__v_skip||!Object.isExtensible(a)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(gt(a));var a;if(0===c)return t;const u=new Proxy(t,2===c?r:n);return o.set(t,u),u}function ke(t){return Re(t)?ke(t.__v_raw):!(!t||!t.__v_isReactive)}function Re(t){return!(!t||!t.__v_isReadonly)}function Ce(t){return!(!t||!t.__v_isShallow)}function Le(t){return ke(t)||Re(t)}function Te(t){const e=t&&t.__v_raw;return e?Te(e):t}const Ie=t=>dt(t)?Pe(t):t,Ae=t=>dt(t)?xe(t):t;function Me(t){return!(!t||!0!==t.__v_isRef)}const Fe={get:(t,e,n)=>{return Me(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const o=t[e];return Me(o)&&!Me(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function Ne(t,e,n,r){let o;try{o=r?t(...r):t()}catch(t){Ue(t,e,n)}return o}function $e(t,e,n,r){if(lt(t)){const o=Ne(t,e,n,r);return o&&ht(o)&&o.catch((t=>{Ue(t,e,n)})),o}const o=[];for(let i=0;i<t.length;i++)o.push($e(t[i],e,n,r));return o}function Ue(t,e,n,r=!0){if(e&&e.vnode,e){let r=e.parent;const o=e.proxy,i=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,o,i))return;r=r.parent}const c=e.appContext.config.errorHandler;if(c)return void Ne(c,null,10,[t,o,i])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let De=!1,qe=!1;const We=[];let Be=0;const Ge=[];let Ve=null,ze=0;const He=[];let Je=null,Ze=0;const Ke=Promise.resolve();let Ye=null,Qe=null;function Xe(t){const e=Ye||Ke;return t?e.then(this?t.bind(this):t):e}function tn(){De||qe||(qe=!0,Ye=Ke.then(on))}function en(t,e,n,r){at(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),tn()}function nn(t,e=null){if(Ge.length){for(Qe=e,Ve=[...new Set(Ge)],Ge.length=0,ze=0;ze<Ve.length;ze++)Ve[ze]();Ve=null,ze=0,Qe=null,nn(t,e)}}const rn=t=>null==t.id?1/0:t.id;function on(t){qe=!1,De=!0,nn(t),We.sort(((t,e)=>rn(t)-rn(e)));try{for(Be=0;Be<We.length;Be++){const t=We[Be];t&&!1!==t.active&&Ne(t,null,14)}}finally{Be=0,We.length=0,function(t){if(He.length){const t=[...new Set(He)];if(He.length=0,Je)return void Je.push(...t);for(Je=t,Je.sort(((t,e)=>rn(t)-rn(e))),Ze=0;Ze<Je.length;Ze++)Je[Ze]();Je=null,Ze=0}}(),De=!1,Ye=null,(We.length||Ge.length||He.length)&&on(t)}}new Set,new Map;let cn=null,an=null;const un=t=>t.__isSuspense;const sn={};function ln(t,e,{immediate:n,deep:r,flush:o,onTrack:i,onTrigger:c}=Q){const a=Dn;let u,s,l=!1,f=!1;if(Me(t)?(u=()=>t.value,l=Ce(t)):ke(t)?(u=()=>t,r=!0):at(t)?(f=!0,l=t.some(ke),u=()=>t.map((t=>Me(t)?t.value:ke(t)?pn(t):lt(t)?Ne(t,a,2):void 0))):u=lt(t)?e?()=>Ne(t,a,2):()=>{if(!a||!a.isUnmounted)return s&&s(),$e(t,a,3,[p])}:tt,e&&r){const t=u;u=()=>pn(t())}let p=t=>{s=v.onStop=()=>{Ne(t,a,4)}};if(Bn)return p=tt,e?n&&$e(e,a,3,[u(),f?[]:void 0,p]):u(),tt;let d=f?[]:sn;const h=()=>{if(v.active)if(e){const t=v.run();(r||l||(f?t.some(((t,e)=>jt(t,d[e]))):jt(t,d)))&&(s&&s(),$e(e,a,3,[t,d===sn?void 0:d,p]),d=t)}else v.run()};let y;h.allowRecurse=!!e,y="sync"===o?h:"post"===o?()=>wn(h,a&&a.suspense):()=>{!a||a.isMounted?function(t){en(t,Ve,Ge,ze)}(h):h()};const v=new Ft(u,y);return e?n?h():d=v.run():"post"===o?wn(v.run.bind(v),a&&a.suspense):v.run(),()=>{v.stop(),a&&a.scope&&ot(a.scope.effects,v)}}function fn(t,e,n){const r=this.proxy,o=ft(t)?t.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(r,t):()=>r[t]:t.bind(r,r);let i;lt(e)?i=e:(i=e.handler,n=e);const c=Dn;qn(this);const a=ln(o,i.bind(r),n);return c?qn(c):Wn(),a}function pn(t,e){if(!dt(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),Me(t))pn(t.value,e);else if(at(t))for(let n=0;n<t.length;n++)pn(t[n],e);else if(st(t)||ut(t))t.forEach((t=>{pn(t,e)}));else if(mt(t))for(const n in t)pn(t[n],e);return t}Boolean,Boolean;RegExp,RegExp;const dn=t=>(e,n=Dn)=>(!Bn||"sp"===t)&&function(t,e,n=Dn,r=!1){if(n){const o=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;Dt(),qn(n);const o=$e(e,n,t,r);return Wn(),qt(),o});return r?o.unshift(i):o.push(i),i}}(t,e,n);dn("bm"),dn("m"),dn("bu"),dn("u"),dn("bum");function hn(t,e,n,r=!1){const{mixins:o,extends:i}=e;i&&hn(t,i,n,!0),o&&o.forEach((e=>hn(t,e,n,!0)));for(const o in e)if(r&&"expose"===o);else{const r=yn[o]||n&&n[o];t[o]=r?r(t[o],e[o]):e[o]}return t}dn("um"),dn("sp"),dn("rtg"),dn("rtc");const yn={data:vn,props:bn,emits:bn,methods:bn,computed:bn,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,beforeUnmount:mn,destroyed:mn,unmounted:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:bn,directives:bn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=rt(Object.create(null),t);for(const r in e)n[r]=mn(t[r],e[r]);return n},provide:vn,inject:function(t,e){return bn(gn(t),gn(e))}};function vn(t,e){return e?t?function(){return rt(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function gn(t){if(at(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function bn(t,e){return t?rt(rt(Object.create(null),t),e):e}const wn=function(t,e){e&&e.pendingBranch?at(t)?e.effects.push(...t):e.effects.push(t):en(t,Je,He,Ze)},_n=t=>t.__isTeleport,On=Symbol(),Sn=Symbol(void 0),jn=Symbol(void 0),Pn=Symbol(void 0),xn=(Symbol(void 0),[]);let En=null;let kn=1;function Rn(t){return t.dynamicChildren=kn>0?En||X:null,xn.pop(),En=xn[xn.length-1]||null,kn>0&&En&&En.push(t),t}const Cn="__vInternal",Ln=({key:t})=>null!=t?t:null,Tn=({ref:t,ref_key:e,ref_for:n})=>null!=t?ft(t)||Me(t)||lt(t)?{i:cn,r:t,k:e,f:!!n}:t:null;function In(t,e=null,n=null,r=0,o=null,i=(t===Sn?0:1),c=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ln(e),ref:e&&Tn(e),scopeId:an,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(Nn(u,n),128&i&&t.normalize(u)):n&&(u.shapeFlag|=ft(n)?8:16),kn>0&&!c&&En&&(u.patchFlag>0||6&i)&&32!==u.patchFlag&&En.push(u),u}const An=function(t,e=null,n=null,r=0,o=null,i=!1){if(t&&t!==On||(t=Pn),c=t,c&&!0===c.__v_isVNode){const r=Mn(t,e,!0);return n&&Nn(r,n),r}var c;if(function(t){return lt(t)&&"__vccOpts"in t}(t)&&(t=t.__vccOpts),e){e=function(t){return t?Le(t)||Cn in t?rt({},t):t:null}(e);let{class:t,style:n}=e;t&&!ft(t)&&(e.class=Y(t)),dt(n)&&(Le(n)&&!at(n)&&(n=rt({},n)),e.style=H(n))}return In(t,e,n,r,o,ft(t)?1:un(t)?128:_n(t)?64:dt(t)?4:lt(t)?2:0,i,!0)};function Mn(t,e,n=!1){const{props:r,ref:o,patchFlag:i,children:c}=t,a=e?function(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=Y([e.class,r.class]));else if("style"===t)e.style=H([e.style,r.style]);else if(nt(t)){const n=e[t],o=r[t];!o||n===o||at(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ln(a),ref:e&&e.ref?n&&o?at(o)?o.concat(Tn(e)):[o,Tn(e)]:Tn(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Sn?-1===i?16:16|i:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mn(t.ssContent),ssFallback:t.ssFallback&&Mn(t.ssFallback),el:t.el,anchor:t.anchor}}function Fn(t=" ",e=0){return An(jn,null,t,e)}function Nn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(at(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),Nn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Cn in e?3===r&&cn&&(1===cn.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=cn}}else lt(e)?(e={default:e,_ctx:cn},n=32):(e=String(e),64&r?(n=16,e=[Fn(e)]):n=8);t.children=e,t.shapeFlag|=n}const $n=t=>t?4&t.vnode.shapeFlag?function(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((n=t.exposed,Pt(n,"__v_skip",!0),e=n,ke(e)?e:new Proxy(e,Fe)),{get:(e,n)=>n in e?e[n]:n in Un?Un[n](t):void 0}));var e;var n}(t)||t.proxy:$n(t.parent):null,Un=rt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$n(t.parent),$root:t=>$n(t.root),$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?function(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:i,config:{optionMergeStrategies:c}}=t.appContext,a=i.get(e);let u;return a?u=a:o.length||n||r?(u={},o.length&&o.forEach((t=>hn(u,t,c,!0))),hn(u,e,c)):u=e,i.set(e,u),u}(t):t.type,$forceUpdate:t=>()=>{return e=t.update,void(We.length&&We.includes(e,De&&e.allowRecurse?Be+1:Be)||e===Qe||(null==e.id?We.push(e):We.splice(function(t){let e=Be+1,n=We.length;for(;e<n;){const r=e+n>>>1;rn(We[r])<t?e=r+1:n=r}return e}(e.id),0,e),tn()));var e},$nextTick:t=>Xe.bind(t.proxy),$watch:t=>__VUE_OPTIONS_API__?fn.bind(t):tt});Object.create(null),new WeakMap,new WeakMap,new WeakMap;let Dn=null;const qn=t=>{Dn=t,t.scope.on()},Wn=()=>{Dn&&Dn.scope.off(),Dn=null};let Bn=!1;Symbol("");var Gn=["title","src","id"];function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function zn(){zn=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,c=Object.create(i.prototype),a=new P(o||[]);return r(c,"_invoke",{value:_(t,n,a)}),c}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function d(){}function h(){}var y={};u(y,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(x([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=h.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,c,a){var u=l(t[r],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Vn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,a)}),(function(t){o("throw",t,c,a)})):e.resolve(f).then((function(t){s.value=t,c(s)}),(function(t){return o("throw",t,c,a)}))}a(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var a=O(c,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=h,r(m,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:d,configurable:!0}),d.displayName=u(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var c=new w(s(e,n,r,o),i);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},b(m),u(m,a,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=x,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return c.type="throw",c.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Hn(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}const Jn={name:"microApp",inheritAttrs:!1,props:{src:{type:String,required:!0},microAppCode:{type:String,required:!0},state:{type:Object},classNmae:String},data:function(){return{id:"gislife-"+this.microAppCode}},watch:{state:{deep:!0,immediate:!0,handler:function(t){var e,n=this;return(e=zn().mark((function e(){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n.id,(function(t){return t&&t.contentWindow}));case 2:n.$connector.sendState(n.microAppCode,t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(t){Hn(i,r,o,c,a,"next",t)}function a(t){Hn(i,r,o,c,a,"throw",t)}c(void 0)}))})()}}},beforeDestroy:function(){this.$connector.unRegisterApp(this.microAppCode)}};var Zn=n(379),Kn=n.n(Zn),Yn=n(795),Qn=n.n(Yn),Xn=n(569),tr=n.n(Xn),er=n(565),nr=n.n(er),rr=n(216),or=n.n(rr),ir=n(589),cr=n.n(ir),ar=n(244),ur=n.n(ar),sr={};sr.styleTagTransform=cr(),sr.setAttributes=nr(),sr.insert=tr().bind(null,"head"),sr.domAPI=Qn(),sr.insertStyleElement=or(),Kn()(ur(),sr),ur()&&ur().locals&&ur().locals;const lr=(0,n(744).Z)(Jn,[["render",function(t,e,n,r,o,i){return function(t=!1){xn.push(En=t?null:[])}(),"iframe",Rn(In("iframe",{title:"gislife"+n.microAppCode,src:n.src,id:o.id,class:Y(["gislife-micro-app",n.classNmae]),ref:"window"},"\r\n\t",10,Gn,undefined,!0))}]]);var fr=new V;const pr={install:function(e){if(window.parent!==window){var n=t(window.location);fr.setAppCode(n.microAppCode)}else fr.setAppCode("main");Object.defineProperty(e.prototype,"$connector",{get:function(){return fr},set:function(t){throw Error("$connector can't set value")}}),e.component(lr.name,lr)}}})(),r})()));
//# sourceMappingURL=micro-message.js.map