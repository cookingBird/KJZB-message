{"version":3,"file":"micro-message.css","mappings":";;;;AAiFA;CACA;CACA;AACA","sources":["webpack://@gislife/micro-message/./src/microApp.vue"],"sourcesContent":["<template>\r\n<iframe\r\n\t:title=\"id\"\r\n\t:src=\"buildSrc(src)\"\r\n\t:id=\"id\"\r\n\tclass=\"gislife-micro-app\"\r\n\t:class=\"classNmae\"\r\n\tref=\"window\"\r\n>\r\n</iframe>\r\n</template>\r\n\r\n<script>\r\n\timport { pickFileds,deepCloneBaseType } from './util'\r\n\r\n\texport default {\r\n\t\tname: \"microApp\",\r\n\t\tinheritAttrs: false,\r\n\t\tprops: {\r\n\t\t\tsrc: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tmicroAppCode: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({})\r\n\t\t\t},\r\n\t\t\tclassNmae: String\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tid () {\r\n\t\t\t\treturn 'gislife-' + this.microAppCode\r\n\t\t\t},\r\n\t\t\tpassiveState () {\r\n\t\t\t\tconst res = {\r\n\t\t\t\t\troute: pickFileds(\r\n\t\t\t\t\t\tthis.$route,\r\n\t\t\t\t\t\t['fullPath','hash','meta','name','params','path','query']\r\n\t\t\t\t\t),\r\n\t\t\t\t\t...deepCloneBaseType(this.state)\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tpassiveState: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler (val,oldVal) {\r\n\t\t\t\t\tif (val != oldVal) {\r\n\t\t\t\t\t\tthis.$connector.$send({\r\n\t\t\t\t\t\t\ttarget: this.microAppCode,\r\n\t\t\t\t\t\t\ttype: 'setState',\r\n\t\t\t\t\t\t\tdata: val\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tdestroyed () {\r\n\t\t\tthis.$connector.unRegisterApp(this.microAppCode)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tbuildSrc (src) {\r\n\t\t\t\tconst hasParam = src.includes('?');\r\n\t\t\t\treturn src + (hasParam ? '&' : '?') + 'microAppCode=' + this.microAppCode\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n\t.gislife-micro-app {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n</style>\r\n"],"names":[],"sourceRoot":""}