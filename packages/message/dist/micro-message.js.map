{"version":3,"file":"micro-message.js","mappings":"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","sources":["webpack://@gislife/micro-message/webpack/universalModuleDefinition","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@gislife/micro-message/webpack/bootstrap","webpack://@gislife/micro-message/webpack/runtime/compat get default export","webpack://@gislife/micro-message/webpack/runtime/define property getters","webpack://@gislife/micro-message/webpack/runtime/hasOwnProperty shorthand","webpack://@gislife/micro-message/webpack/runtime/make namespace object","webpack://@gislife/micro-message/webpack/runtime/nonce","webpack://@gislife/micro-message/./src/util/getParams.js","webpack://@gislife/micro-message/./src/util/onEvent.js","webpack://@gislife/micro-message/./src/util/requestDom.js","webpack://@gislife/micro-message/./src/util/volume.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/native.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/rng.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/v4.js","webpack://@gislife/micro-message/./src/core/Message.js","webpack://@gislife/micro-message/./src/core/Channel.default.js","webpack://@gislife/micro-message/./src/core/Channel.js","webpack://@gislife/micro-message/./src/ApplicationChannel.js","webpack://@gislife/micro-message/src/microApp.vue","webpack://@gislife/micro-message/./src/microApp.vue?fb87","webpack://@gislife/micro-message/./src/microApp.vue?2127","webpack://@gislife/micro-message/./src/microApp.vue?d935","webpack://@gislife/micro-message/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://@gislife/micro-message/./src/microApp.vue","webpack://@gislife/micro-message/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"micro-message\"] = factory();\n\telse\n\t\troot[\"micro-message\"] = factory();\n})(self, () => {\nreturn ","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","/**\r\n * @description 获取URL search参数\r\n * @param {Location} location\r\n * @returns {object}\r\n */\r\nexport function getParams (location) {\r\n  const search = location.search.slice(1)\r\n  const result = {}\r\n  search\r\n    .split('&')\r\n    .map(p => p.split('='))\r\n    .forEach(item => {\r\n      result[item[0]] = item[1]\r\n    })\r\n  return result\r\n}\r\n","import '../core/Channel.type'\r\n/**\r\n * @description 监听pagehide事件\r\n * @param {Function} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onPageHide (cb) {\r\n  console.log('page hide-------------------------------')\r\n  window.addEventListener('pagehide', cb)\r\n  return () => window.removeEventListener('pagehide', cb)\r\n}\r\n\r\n/**\r\n * @description 监听load事件\r\n * @param {Function} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onLoad (cb) {\r\n  window.addEventListener('load', cb)\r\n  return () => window.removeEventListener('load', cb)\r\n}\r\n\r\n/**\r\n * @description 监听message事件\r\n * @param {IGenericFunction<IMessageEventResponse,*>} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onMessage (cb) {\r\n  window.addEventListener('message', cb)\r\n  return () => window.removeEventListener('message', cb)\r\n}\r\n","/**\r\n * @callback judgeCallback\r\n * @param {?HTMLIFrameElement}\r\n * @returns {boolean}\r\n */\r\n\r\n/**\r\n *\r\n * @param {string} id 目标元素id\r\n * @param {?judgeCallback} judgeCb 确定元素获取成功的judge函数\r\n * @param {'requestAnimationFrame' | 'setTimeout'} [type='requestAnimationFrame'] 轮询函数类型\r\n * @returns {promise<HTMLIFrameElement | null>}\r\n */\r\nexport function requestDom (\r\n  id,\r\n  judgeCb = el => Boolean(el),\r\n  type = 'requestAnimationFrame'\r\n) {\r\n  function getDom (id, callback, type) {\r\n    if (document && window && window.requestAnimationFrame) {\r\n      const el = document.getElementById(id)\r\n\r\n      if (!judgeCb(el)) {\r\n        if (type === 'requestAnimationFrame') {\r\n          requestAnimationFrame(() => {\r\n            getDom(id, callback, type)\r\n          })\r\n        }\r\n        if (type === 'setTimeout') {\r\n          setTimeout(() => {\r\n            getDom(id, callback, type)\r\n          })\r\n        }\r\n      } else {\r\n        return callback(el)\r\n      }\r\n    } else {\r\n      throw Error(\"browser don't support\")\r\n    }\r\n  }\r\n\r\n  let resolver\r\n  return new Promise(resolve => {\r\n    resolver = resolve\r\n    getDom(\r\n      id,\r\n      el => {\r\n        setTimeout(() => {\r\n          resolver(el)\r\n        })\r\n      },\r\n      type\r\n    )\r\n  })\r\n}\r\n","class ArrayVolume {\r\n  constructor (length) {\r\n    this.queue = length === void 0 ? [] : new Array(length)\r\n  }\r\n  /**\r\n   * 加入一个回调函数到执行队列\r\n   * @param { Function } callback 回调函数\r\n   * @param { number } priority 优先级\r\n   * @returns { Function } remove函数 从队列中移除回调\r\n   */\r\n  push (callback, priority = 0) {\r\n    if (priority === 0) {\r\n      this.queue.push(callback)\r\n    }\r\n    if (priority === 1) {\r\n      this.queue.unshift(callback)\r\n    }\r\n    return () =>\r\n      this.queue.splice(\r\n        this.queue.findIndex(fn => fn === callback),\r\n        1\r\n      )\r\n  }\r\n}\r\n\r\n/**\r\n * @template T\r\n */\r\nexport class ChainRunner extends ArrayVolume {\r\n  constructor () {\r\n    super()\r\n  }\r\n  /**\r\n   * @description 加入一个回调函数到执行队列\r\n   * @param { IGenericFunction<T,T> } callback 回调函数\r\n   * @param { number } [priority=1] 优先级\r\n   * @returns { cancelCallback } remove函数 从队列中移除回调\r\n   */\r\n  push (callback, priority = 1) {\r\n    return super.push(callback, priority)\r\n  }\r\n  /**\r\n   * @description 加入一个回调函数到执行队列\r\n   * @param { IGenericFunction<T,T> } callback 回调函数\r\n   * @returns { cancelCallback } remove函数 从队列中移除回调\r\n   */\r\n  use (callback) {\r\n    return this.push(callback)\r\n  }\r\n  /**\r\n   * @description 链式执行回调队列中的回调函数\r\n   * @param  {*} result 执行参数\r\n   * @returns {T}\r\n   */\r\n  run (result) {\r\n    let res = result\r\n    for (const fn of this.queue) {\r\n      res = fn(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from 'uuid'\r\nimport { ChainRunner, onMessage } from '../util'\r\n\r\n/**\r\n * @class\r\n */\r\nexport class Message {\r\n  /**\r\n   * @description 初始化一个Channel\r\n   * @constructor\r\n   * @param {Window | WindowContent} targetWindow\r\n   * @param {MessageOpts} options Channel初始化options\r\n   */\r\n  constructor (targetWindow, options = {}) {\r\n    this.targetOrigin = options.targetOrigin || '*'\r\n    this.timeout = options.timeout || 3 * 1000\r\n    this.tag = options.namespace || 'gislife'\r\n    /**@description 默认回复响应的拦截器 */\r\n    /**@type ChainRunner<IMessage<IPostMessageSyntax<*>>> */\r\n    this.defaultResponseInterceptor = new ChainRunner()\r\n    /**@description 请求拦截器 */\r\n    /**@type ChainRunner<IPostMessageSyntax<*>> */\r\n    this.requestInterceptor = new ChainRunner()\r\n    this._cancel = this._initResponse()\r\n  }\r\n  /**\r\n   * @description 初始化消息默认回复事件\r\n   * @returns {cancelCallback} 取消默认回复事件\r\n   */\r\n  _initResponse () {\r\n    return onMessage(e => {\r\n      if (e.data?.response === false) {\r\n        e.source.postMessage(\r\n          { ...this.defaultResponseInterceptor.run(e.data), response: true },\r\n          e.origin\r\n        )\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * todo 包裹原生消息发生函数，保证消息唯一性,局部性;\r\n   * @description 发送消息\r\n   * @param {IPostMessageSyntax<T>} msg\r\n   * @param {HTMLIFrameElement.contentWindow} target\r\n   * @returns { Promise<IMessage<IPostMessageSyntax<T>>&{response:true}> }\r\n   */\r\n  _postMessage (msg, target) {\r\n    const timeout = msg.timeout || this.timeout\r\n    let isSendOK = false\r\n    if (target) {\r\n      let resolvor, rejector\r\n      const id = uuidv4()\r\n      const cancel = onMessage(res => {\r\n        const { data } = res\r\n        if (data?.id === id && data.belong === this.tag) {\r\n          isSendOK = true\r\n          resolvor(data.data)\r\n          cancel()\r\n        }\r\n      })\r\n      return new Promise((resolve, reject) => {\r\n        resolvor = resolve\r\n        rejector = reject\r\n        /** @type IPostMessageSyntax<*> */\r\n        const data = JSON.stringify(this.requestInterceptor.run(msg))\r\n        target.postMessage(\r\n          {\r\n            id,\r\n            data: data,\r\n            belong: this.tag,\r\n            response: false\r\n          },\r\n          '*'\r\n        )\r\n        setTimeout(() => {\r\n          if (!isSendOK) {\r\n            rejector('-----postMessage timeout,target maybe not ready')\r\n            cancel()\r\n          }\r\n        }, timeout)\r\n      })\r\n    } else {\r\n      return Promise.reject('missing target')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * todo 发送消息\r\n   * @description 发送消息\r\n   * @param {Window} target\r\n   * @param {IPostMessageSyntax<T>} msg 消息体\r\n   * @returns { Promise<T> } 确认消息发送成功的回调\r\n   */\r\n  send (target, msg) {\r\n    return this._postMessage(msg, target).then(\r\n      res => {\r\n        return res\r\n      },\r\n      err => {\r\n        return Promise.reject(err)\r\n      }\r\n    )\r\n  }\r\n  /**\r\n   * @description 监听消息 只监听接受消息\r\n   * @param {IGenericFunction<IPostMessageSyntax<*>,void>} cb 接收到消息的回调函数\r\n   * @returns {cancelCallback} 取消监听事件的函数\r\n   */\r\n  on (cb) {\r\n    return onMessage(event => {\r\n      if (event?.data?.belong === this.tag && event.data?.response === false) {\r\n        cb(JSON.parse(event.data.data))\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 销毁连接器\r\n   */\r\n  destory () {\r\n    this._cancel()\r\n  }\r\n}\r\n","/**@description 支持的事件类型的集合 */\r\nexport const SUPPORT_MESSAGE_TYPE = [\r\n  'state',\r\n  'config',\r\n  'callback',\r\n  'emit',\r\n  'register',\r\n  'unregister'\r\n]\r\n\r\nexport const DEFAULT_GLOBAL_CONFIG = 'URL_CONFIG'\r\n\r\nwindow[DEFAULT_GLOBAL_CONFIG] = {\r\n  test: 'test'\r\n}\r\n","import { Message } from './Message'\r\nimport { onPageHide } from '../util'\r\nimport { DEFAULT_GLOBAL_CONFIG } from './Channel.default'\r\n\r\n/**@type {Map<microAppCode,microAppContext>} */\r\nconst microAppMap = new Map()\r\n/**@type {WeakMap<microAppContext,microAppCode>} */\r\nconst microAppElMap = new WeakMap()\r\n/**\r\n * @typedef {Map<microAppContext,object>} IStateMap\r\n * @description 组件状态Map\r\n * @type {IStateMap}\r\n */\r\nconst stateMap = new Map()\r\n\r\n/**\r\n * @class Channel\r\n */\r\nexport class Channel extends Message {\r\n  /**\r\n   * @description 新建一个目标连接频道\r\n   * @constructor\r\n   * @param { Window | windowContent} target 目标上下文\r\n   * @param {ChannelOpts} options 其它参数\r\n   */\r\n  constructor (target, options = {}) {\r\n    super(target, options)\r\n    this.appCode = options.appCode\r\n    this.localStorageName = options.localStorageName || 'globalConfig'\r\n    this._configResponse(this)\r\n    this._stateResponse(this)\r\n  }\r\n\r\n  /**\r\n   * !应用注册的主要逻辑\r\n   * @description 设置当前应用的AppCode\r\n   * @param {string} val\r\n   * @returns {void}\r\n   */\r\n  setAppCode (val) {\r\n    this.appCode = val\r\n    // todo 当前应用不是子应用，则向主应用注册\r\n    this.__pageHideCancel?.()\r\n    this.__maintainCancel?.()\r\n    // todo 自动向父级注册\r\n    if (window.parent !== window) {\r\n      window.parent.postMessage('message', '*')\r\n      this.send(window.parent, {\r\n        target: 'parent',\r\n        type: 'register'\r\n      }) //todo 自动拉取全局应用配置\r\n        .then(res => {\r\n          return this.send(window.parent, {\r\n            target: 'main',\r\n            type: 'config'\r\n          })\r\n        }) //todo 本地持久化\r\n        .then(res => {\r\n          localStorage.setItem(this.localStorageName, JSON.stringify(res.data))\r\n        })\r\n    }\r\n    // todo 维护子应用注册表\r\n    this.__maintainCancel = this.on(res => {\r\n      const microAppCode = res.sourceCode\r\n      if (res.type === 'register') {\r\n        //todo 注册\r\n        const el = document.getElementById('gislife-' + microAppCode)\r\n        if (el) {\r\n          this.registerApp(microAppCode, el)\r\n        } else {\r\n          console.error('register error, can not find element')\r\n        }\r\n      }\r\n    })\r\n    // todo 消息派发的主要逻辑\r\n    this.__cancelPassive = this._onPassive()\r\n  }\r\n\r\n  /**\r\n   * !消息派发的主要逻辑\r\n   * todo 如果消息没有target 默认target为 main\r\n   * @description 为每条消息带上popSource\r\n   * @param {IPostMessageSyntax<T>} msg\r\n   * @param {?Window} target\r\n   * @returns {Promise<IPostMessageSyntax<T>>}\r\n   */\r\n  send (target, msg) {\r\n    msg.sourceCode =\r\n      msg.sourceCode === undefined ? this.appCode : msg.sourceCode\r\n    msg.pop = msg.pop === undefined ? true : msg.pop\r\n    //todo 如果target不存在于当前Map则向全局发送消息\r\n    if (!target) {\r\n      const parent = window.parent !== window ? [window.parent] : []\r\n      const sibling = []\r\n      microAppMap.forEach((value, key) => {\r\n        sibling.push(value.contentWindow)\r\n      })\r\n      return Promise.all(\r\n        parent.concat(sibling).map(tar => super.send(tar, msg))\r\n      )\r\n    } else {\r\n      // todo如果target是'main'则直接向上传递消息；\r\n      return super.send(target, msg)\r\n    }\r\n  }\r\n  /**\r\n   * todo 响应自己的消息，如果不是自己的消息则传递消息\r\n   * @description 监听消息，并在自动取消监听\r\n   * @param {IGenericFunction<IPostMessageSyntax<*>,void>} cb 监听到消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消监听的回调函数\r\n   */\r\n  on (cb) {\r\n    return super.on(msg => {\r\n      // todo 如果消息的目标是当前目标或者为'parent'，则直接响应消息\r\n      if (\r\n        msg.target === this.appCode ||\r\n        msg.target === 'parent' ||\r\n        msg.target === 'global'\r\n      ) {\r\n        cb(msg)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description 注册子应用\r\n   * @param {string} appCode 子应用Code\r\n   * @param {HTMLIFrameElement} target 子应用Iframe元素\r\n   */\r\n  registerApp (appCode, target) {\r\n    if (microAppMap.has(appCode)) return\r\n    microAppMap.set(appCode, target)\r\n    microAppElMap.set(target, appCode)\r\n  }\r\n  /**\r\n   * @description 取消注册子应用\r\n   * @param {string} appCode 子应用Code\r\n   */\r\n  unRegisterApp (appCode) {\r\n    return microAppMap.delete(appCode)\r\n  }\r\n  /**\r\n   * @typedef {[string,HTMLIFrameElement] } targetLike\r\n   * @param {targetLike | undefined} target\r\n   */\r\n  getApp (target) {\r\n    let res\r\n    if (target instanceof HTMLIFrameElement) {\r\n      const tarCode = microAppElMap.get(target)\r\n      if (tarCode) res = [tarCode, tar]\r\n    }\r\n    if (typeof target === 'string') {\r\n      const tar = microAppMap.get(target)\r\n      if (tar) res = [target, tar]\r\n    }\r\n    if (!res) console.warn('getApp error,target named:', target, microAppMap)\r\n    return res\r\n  }\r\n  /**\r\n   * @description 销毁实例，取消事件监听\r\n   */\r\n  destory () {\r\n    this.__maintainCancel()\r\n    this.__pageHideCancel()\r\n    super.destory()\r\n  }\r\n\r\n  /**\r\n   * @param {microAppCode} microAppCode\r\n   * @returns {object | undefined}\r\n   */\r\n  getState (microAppCode) {\r\n    let res\r\n    res = stateMap.get(microAppCode)\r\n    return res\r\n  }\r\n  /**\r\n   *\r\n   * @param {microAppCode} microAppCode\r\n   * @param {object} state\r\n   * @returns {IStateMap}\r\n   */\r\n  setState (microAppCode, state) {\r\n    return stateMap.set(microAppCode, state)\r\n  }\r\n  /**\r\n   * @description\r\n   * @param {Channel} context\r\n   */\r\n  _configResponse (context) {\r\n    context.defaultResponseInterceptor.push(data => {\r\n      if (data?.data?.type === 'config') {\r\n        //todo 传递config\r\n        const config = JSON.parse(localStorage.getItem(this.localStorageName))\r\n        data.data.data = window[DEFAULT_GLOBAL_CONFIG] || config\r\n      }\r\n      return data\r\n    })\r\n  }\r\n\r\n  _onPassive () {\r\n    return super.on(msg => {\r\n      // todo 传递消息\r\n      if (\r\n        msg.target !== 'parent' &&\r\n        msg.target !== this.appCode &&\r\n        msg.type !== 'state'\r\n      ) {\r\n        if (this.appCode === 'main') msg.pop = false\r\n        // todo 如果是main,则向上传递；如果不是，则全局传递\r\n        if (msg.target === 'main') {\r\n          if (window.parent !== window) this.send(window.parent, msg)\r\n        } else {\r\n          // todo 如果不是，则需要向sibling和parent同时传递\r\n          microAppMap.forEach((tar, tarCode) => {\r\n            if (tarCode !== msg.sourceCode) {\r\n              this.send(tar.contentWindow, msg)\r\n            }\r\n          })\r\n          if (window.parent !== window && msg.pop === true) {\r\n            this.send(window.parent, msg)\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description 响应onStaet第一次请求数据\r\n   * @param {Channel} context\r\n   */\r\n  _stateResponse (context) {\r\n    return context.defaultResponseInterceptor.use(msg => {\r\n      if (msg.data.type === 'state') {\r\n        msg.data.data = stateMap.get(msg.data.sourceCode)\r\n      }\r\n      return msg\r\n    })\r\n  }\r\n}\r\n","import { Channel } from './core/Channel'\r\nimport { SUPPORT_MESSAGE_TYPE } from './core/Channel.default'\r\n\r\n/**\r\n * @class ApplicationChannel\r\n */\r\nexport class ApplicationChannel extends Channel {\r\n  /**\r\n   * @description 新建一个目标连接频道\r\n   * @constructor\r\n   * @param { window | windowContent} target 目标上下文\r\n   * @param {ChannelOpts} options 其它参数\r\n   */\r\n  constructor (target, options) {\r\n    super(target, options)\r\n  }\r\n  /**\r\n   * @description 处理多条件参数\r\n   * @param {IPostMessageSyntax<T> & {target:HTMLIFrameElement}} msg\r\n   * @returns {Promise<IPostMessageSyntax<T>>}\r\n   */\r\n  $send (msg) {\r\n    let target\r\n    if (!msg.target || !msg.type) throw Error('message syntax error')\r\n    const msgTarget = msg.target\r\n    //todo main parent发送\r\n    if (\r\n      (msgTarget === 'main' || msgTarget === 'parent') &&\r\n      window.parent !== window\r\n    ) {\r\n      target = window.parent\r\n      return super.send(target, msg)\r\n    }\r\n    // todo如果target是HTMLIFrameElement\r\n    // todo直接发送消息，且将target自动替换为对应的appCode\r\n    const targetLike = this.getApp(msgTarget)\r\n    if (msgTarget instanceof HTMLIFrameElement && targetLike) {\r\n      msg.target = targetLike[0]\r\n      target = msgTarget.contentWindow\r\n    }\r\n    //todo 如果target是appCode则在map中找到对的HTMLIFrameElement\r\n    if (typeof msgTarget === 'string' && targetLike) {\r\n      /**@type HTMLIFrameElement */\r\n      const tar = targetLike[1]\r\n      target = tar.contentWindow\r\n    }\r\n    if (!target) console.warn('current layer target not exist', msg)\r\n    return super.send(target, msg)\r\n  }\r\n  /**\r\n   * @param {Vue.Component} context\r\n   * @param {PostMessageType | IGenericFunction<IPostMessageSyntax<IUserData>,any>} type\r\n   * @param {IGenericFunction<IPostMessageSyntax<IUserData>,any> | IGenericFunction<IUserData,any>} cb\r\n   */\r\n  $on (context, type, cb) {\r\n    let onCancel\r\n    if (!(typeof type === 'string' || typeof type === 'function')) {\r\n      throw Error('type parma type error')\r\n    }\r\n    if (context) {\r\n      context.$on('hook:beforeDestory', () => {\r\n        onCancel?.()\r\n      })\r\n    }\r\n    if (typeof type === 'function') {\r\n      onCancel = super.on(msg => {\r\n        type(msg)\r\n      })\r\n      return onCancel\r\n    }\r\n    onCancel = super.on(msg => {\r\n      if (msg.type === type) {\r\n        cb(msg.data)\r\n      }\r\n    })\r\n    return onCancel\r\n  }\r\n\r\n  /**\r\n   * @description 发送回调消息\r\n   * @param { string } target 目标应用CODE\r\n   * @param { function } cb 回调函数\r\n   * @param { object | null} params 回调函数参数\r\n   * @returns { promise }\r\n   */\r\n  sendCallback (target, cb, params) {\r\n    if (typeof cb !== 'function' || params === undefined) {\r\n      throw Error('callback or params type error')\r\n    }\r\n    if (!target) {\r\n      throw Error('missing target')\r\n    }\r\n    return this.$send({\r\n      type: 'callback',\r\n      target: target,\r\n      data: {\r\n        callback: cb.toString(),\r\n        params: params\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * @description 接收消息\r\n   * @param {IGenericFunction<Function,any>} cb 接收消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消回调的函数\r\n   */\r\n  onCallback (context, cb) {\r\n    return this.$on(context, msg => {\r\n      if (msg.type === 'callback') {\r\n        const data = msg.data\r\n        if (data.params !== null) {\r\n          const paramsName = Object.keys(data.params)\r\n          const paramsValue = Object.values(data.params)\r\n          const func = Function(\r\n            ...paramsName,\r\n            `(${data.callback})(${paramsName.join(',')})`\r\n          )\r\n          cb(function (ctx) {\r\n            func.apply(ctx, paramsValue)\r\n          })\r\n        } else {\r\n          const func = Function(`(${data.callback})()`)\r\n          cb(function (ctx) {\r\n            func.apply(ctx)\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description 获取远程全局配置\r\n   * @returns {Promise<object>}\r\n   */\r\n  getConfig () {\r\n    const cfg = localStorage.getItem(this.localStorageName)\r\n    if (cfg) {\r\n      const config = JSON.parse(cfg)\r\n      return Promise.resolve(config)\r\n    } else {\r\n      return this.$send({\r\n        type: 'config',\r\n        target: 'main'\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * @description 发送配置，只能以code方式发送，为了避免子应用未注册造成的消息丢失\r\n   * @param {string} microAppCode\r\n   * @param {object} state\r\n   */\r\n  sendState (microAppCode, state) {\r\n    this.setState(microAppCode, state)\r\n    return this.$send({\r\n      type: 'state',\r\n      target: microAppCode,\r\n      data: state\r\n    })\r\n  }\r\n  /**\r\n   * @description 接收消息 T为消息的具体格式\r\n   * @template T\r\n   * @param {IGenericFunction<T,any>} cb 接收消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消回调的函数\r\n   */\r\n  onState (cb, context) {\r\n    this.$send({\r\n      target: 'parent',\r\n      type: 'state'\r\n    }).then(res => cb(res.data))\r\n    return this.$on(context, msg => {\r\n      if (msg.type === 'state') {\r\n        const data = msg.data\r\n        cb(data)\r\n      }\r\n    })\r\n  }\r\n}\r\n","<template>\r\n\t<iframe\r\n\t\t:title=\"id\"\r\n\t\t:src=\"src\"\r\n\t\t:id=\"id\"\r\n\t\tclass=\"gislife-micro-app\"\r\n\t\t:class=\"classNmae\"\r\n\t\tref=\"window\"\r\n\t>\r\n\t</iframe>\r\n</template>\r\n\r\n<script>\r\nimport { requestDom } from './util'\r\n\r\nexport default {\r\n\tname: \"microApp\",\r\n\tinheritAttrs: false,\r\n\tprops: {\r\n\t\tsrc: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tmicroAppCode: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tstate: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tclassNmae: String\r\n\t},\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tid: 'gislife-' + this.microAppCode\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tstate: {\r\n\t\t\tdeep: true,\r\n\t\t\timmediate: true,\r\n\t\t\tasync handler (val) {\r\n\t\t\t\tawait requestDom(this.id,(el) => el && el.contentWindow)\r\n\t\t\t\t/**@type ConnectChannel */\r\n\t\t\t\tconst connector = this.$connector;\r\n\t\t\t\tconnector.sendState(this.microAppCode,val)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeDestroy () {\r\n\t\tthis.$connector.unRegisterApp(this.microAppCode)\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n.gislife-micro-app {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=script&lang=js&\"","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-2.use[1]!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-2.use[1]!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./microApp.vue?vue&type=template&id=54c7b0c4&\"\nimport script from \"./microApp.vue?vue&type=script&lang=js&\"\nexport * from \"./microApp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent(\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */,\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options =\n    typeof scriptExports === 'function' ? scriptExports.options : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) {\n    // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n          injectStyles.call(\n            this,\n            (options.functional ? this.parent : this).$root.$options.shadowRoot\n          )\n        }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('iframe',{ref:\"window\",staticClass:\"gislife-micro-app\",class:_vm.classNmae,attrs:{\"title\":_vm.id,\"src\":_vm.src,\"id\":_vm.id}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * @author dengtao\r\n * @version 1.0.0\r\n */\r\nimport * as Utils from './util'\r\nimport { ApplicationChannel } from './ApplicationChannel'\r\nimport microAppVue from './microApp.vue'\r\n\r\n/**\r\n * @typedef ParamsType\r\n * @type {object}\r\n * @property {string} appCode\r\n * @property {string} microAppCode\r\n */\r\nconst connector = new ApplicationChannel()\r\nexport { Utils, connector }\r\nexport default {\r\n  install (vue) {\r\n    if (window.parent !== window) {\r\n      // TODO 获取子应用AppCode\r\n      /**@type ParamsType */\r\n      const params = Utils.getParams(window.location)\r\n      // ! 子应用\r\n      connector.setAppCode(params.microAppCode)\r\n    } else {\r\n      // ! 主应用\r\n      connector.setAppCode('main')\r\n    }\r\n    Object.defineProperty(vue.prototype, '$connector', {\r\n      get () {\r\n        return connector\r\n      },\r\n      set (v) {\r\n        throw Error(\"$connector can't set value\")\r\n      }\r\n    })\r\n    vue.component(microAppVue.name, microAppVue)\r\n  }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","self","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","needLayer","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","getParams","location","search","slice","split","map","p","forEach","onPageHide","cb","addEventListener","removeEventListener","onLoad","onMessage","requestDom","resolver","judgeCb","arguments","el","Boolean","type","getDom","callback","requestAnimationFrame","getElementById","setTimeout","Promise","resolve","ChainRunner","_ArrayVolume","_inherits","_super","_classCallCheck","_createClass","priority","_get","_getPrototypeOf","this","_step","res","_iterator","_createForOfIteratorHelper","queue","s","done","fn","err","f","ArrayVolume","Array","_this","unshift","findIndex","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","rng","byteToHex","toString","buf","offset","rnds","random","arr","toLowerCase","unsafeStringify","Message","targetWindow","targetOrigin","timeout","tag","namespace","defaultResponseInterceptor","requestInterceptor","_cancel","_initResponse","_e$data","data","response","source","postMessage","_objectSpread","run","origin","msg","_this2","isSendOK","resolvor","rejector","uuidv4","cancel","belong","reject","_postMessage","then","_this3","event","_event$data","_event$data2","parse","DEFAULT_GLOBAL_CONFIG","test","microAppMap","Map","microAppElMap","WeakMap","stateMap","Channel","_Message","appCode","localStorageName","_configResponse","_assertThisInitialized","_stateResponse","val","_this$__pageHideCance","_this$__maintainCance","__pageHideCancel","__maintainCancel","parent","send","localStorage","setItem","on","microAppCode","sourceCode","registerApp","console","error","__cancelPassive","_onPassive","pop","sibling","contentWindow","all","tar","_this4","has","set","tarCode","warn","state","context","_this5","_data$data","config","getItem","_this6","use","ApplicationChannel","_Channel","msgTarget","targetLike","getApp","onCancel","$on","_onCancel","params","$send","paramsName","keys","paramsValue","values","func","Function","join","ctx","cfg","setState","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","_typeof","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","object","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","inheritAttrs","props","src","String","required","classNmae","watch","deep","immediate","handler","_callee","_context","$connector","sendState","args","beforeDestroy","unRegisterApp","component","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_injectStyles","originalRender","h","existing","beforeCreate","_vm","_c","_self","ref","staticClass","class","attrs","connector","install","vue","Utils","setAppCode","v","microAppVue"],"sourceRoot":""}