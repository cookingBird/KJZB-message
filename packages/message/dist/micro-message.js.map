{"version":3,"file":"micro-message.js","mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAQ,iBAAmBD,IAE3BD,EAAK,iBAAmBC,GACzB,CATD,CASGK,MAAM,iDCPT,IAAIC,EAAc,GAClB,SAASC,EAAqBC,GAE5B,IADA,IAAIC,GAAU,EACLC,EAAI,EAAGA,EAAIJ,EAAYK,OAAQD,IACtC,GAAIJ,EAAYI,GAAGF,aAAeA,EAAY,CAC5CC,EAASC,EACT,KACF,CAEF,OAAOD,CACT,CACA,SAASG,EAAaC,EAAMC,GAG1B,IAFA,IAAIC,EAAa,CAAC,EACdC,EAAc,GACTN,EAAI,EAAGA,EAAIG,EAAKF,OAAQD,IAAK,CACpC,IAAIO,EAAOJ,EAAKH,GACZQ,EAAKJ,EAAQK,KAAOF,EAAK,GAAKH,EAAQK,KAAOF,EAAK,GAClDG,EAAQL,EAAWG,IAAO,EAC1BV,EAAa,GAAGa,OAAOH,EAAI,KAAKG,OAAOD,GAC3CL,EAAWG,GAAME,EAAQ,EACzB,IAAIE,EAAoBf,EAAqBC,GACzCe,EAAM,CACRC,IAAKP,EAAK,GACVQ,MAAOR,EAAK,GACZS,UAAWT,EAAK,GAChBU,SAAUV,EAAK,GACfW,MAAOX,EAAK,IAEd,IAA2B,IAAvBK,EACFhB,EAAYgB,GAAmBO,aAC/BvB,EAAYgB,GAAmBQ,QAAQP,OAClC,CACL,IAAIO,EAAUC,EAAgBR,EAAKT,GACnCA,EAAQkB,QAAUtB,EAClBJ,EAAY2B,OAAOvB,EAAG,EAAG,CACvBF,WAAYA,EACZsB,QAASA,EACTD,WAAY,GAEhB,CACAb,EAAYkB,KAAK1B,EACnB,CACA,OAAOQ,CACT,CACA,SAASe,EAAgBR,EAAKT,GAC5B,IAAIqB,EAAMrB,EAAQsB,OAAOtB,GAYzB,OAXAqB,EAAIE,OAAOd,GACG,SAAiBe,GAC7B,GAAIA,EAAQ,CACV,GAAIA,EAAOd,MAAQD,EAAIC,KAAOc,EAAOb,QAAUF,EAAIE,OAASa,EAAOZ,YAAcH,EAAIG,WAAaY,EAAOX,WAAaJ,EAAII,UAAYW,EAAOV,QAAUL,EAAIK,MACzJ,OAEFO,EAAIE,OAAOd,EAAMe,EACnB,MACEH,EAAII,QAER,CAEF,CACArC,EAAOD,QAAU,SAAUY,EAAMC,GAG/B,IAAI0B,EAAkB5B,EADtBC,EAAOA,GAAQ,GADfC,EAAUA,GAAW,CAAC,GAGtB,OAAO,SAAgB2B,GACrBA,EAAUA,GAAW,GACrB,IAAK,IAAI/B,EAAI,EAAGA,EAAI8B,EAAgB7B,OAAQD,IAAK,CAC/C,IACIgC,EAAQnC,EADKiC,EAAgB9B,IAEjCJ,EAAYoC,GAAOb,YACrB,CAEA,IADA,IAAIc,EAAqB/B,EAAa6B,EAAS3B,GACtC8B,EAAK,EAAGA,EAAKJ,EAAgB7B,OAAQiC,IAAM,CAClD,IACIC,EAAStC,EADKiC,EAAgBI,IAEK,IAAnCtC,EAAYuC,GAAQhB,aACtBvB,EAAYuC,GAAQf,UACpBxB,EAAY2B,OAAOY,EAAQ,GAE/B,CACAL,EAAkBG,CACpB,CACF,wBCjFA,IAAIG,EAAO,CAAC,EA+BZ5C,EAAOD,QAPP,SAA0B8C,EAAQC,GAChC,IAAIC,EAtBN,SAAmBA,GACjB,QAA4B,IAAjBH,EAAKG,GAAyB,CACvC,IAAIC,EAAcC,SAASC,cAAcH,GAGzC,GAAII,OAAOC,mBAAqBJ,aAAuBG,OAAOC,kBAC5D,IAGEJ,EAAcA,EAAYK,gBAAgBC,IAC5C,CAAE,MAAOC,GAEPP,EAAc,IAChB,CAEFJ,EAAKG,GAAUC,CACjB,CACA,OAAOJ,EAAKG,EACd,CAIeS,CAAUX,GACvB,IAAKE,EACH,MAAM,IAAIU,MAAM,2GAElBV,EAAOW,YAAYZ,EACrB,wBCvBA9C,EAAOD,QANP,SAA4Ba,GAC1B,IAAI+C,EAAUV,SAASW,cAAc,SAGrC,OAFAhD,EAAQiD,cAAcF,EAAS/C,EAAQkD,YACvClD,EAAQiC,OAAOc,EAAS/C,EAAQA,SACzB+C,CACT,8BCCA3D,EAAOD,QANP,SAAwCgE,GACtC,IAAIC,EAAmD,KACnDA,GACFD,EAAaE,aAAa,QAASD,EAEvC,wBCoDAhE,EAAOD,QAjBP,SAAgBa,GACd,GAAwB,oBAAbqC,SACT,MAAO,CACLd,OAAQ,WAAmB,EAC3BE,OAAQ,WAAmB,GAG/B,IAAI0B,EAAenD,EAAQsD,mBAAmBtD,GAC9C,MAAO,CACLuB,OAAQ,SAAgBd,IAjD5B,SAAe0C,EAAcnD,EAASS,GACpC,IAAIC,EAAM,GACND,EAAII,WACNH,GAAO,cAAcH,OAAOE,EAAII,SAAU,QAExCJ,EAAIE,QACND,GAAO,UAAUH,OAAOE,EAAIE,MAAO,OAErC,IAAI4C,OAAiC,IAAd9C,EAAIK,MACvByC,IACF7C,GAAO,SAASH,OAAOE,EAAIK,MAAMjB,OAAS,EAAI,IAAIU,OAAOE,EAAIK,OAAS,GAAI,OAE5EJ,GAAOD,EAAIC,IACP6C,IACF7C,GAAO,KAELD,EAAIE,QACND,GAAO,KAELD,EAAII,WACNH,GAAO,KAET,IAAIE,EAAYH,EAAIG,UAChBA,GAA6B,oBAAT4C,OACtB9C,GAAO,uDAAuDH,OAAOiD,KAAKC,SAASC,mBAAmBC,KAAKC,UAAUhD,MAAe,QAKtIZ,EAAQ6D,kBAAkBnD,EAAKyC,EAAcnD,EAAQA,QACvD,CAoBM8D,CAAMX,EAAcnD,EAASS,EAC/B,EACAgB,OAAQ,YArBZ,SAA4B0B,GAE1B,GAAgC,OAA5BA,EAAaY,WACf,OAAO,EAETZ,EAAaY,WAAWC,YAAYb,EACtC,CAgBMc,CAAmBd,EACrB,EAEJ,wBC9CA/D,EAAOD,QAVP,SAA2BuB,EAAKyC,GAC9B,GAAIA,EAAae,WACff,EAAae,WAAWC,QAAUzD,MAC7B,CACL,KAAOyC,EAAaiB,YAClBjB,EAAaa,YAAYb,EAAaiB,YAExCjB,EAAaL,YAAYT,SAASgC,eAAe3D,GACnD,CACF,ICXI4D,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAatF,QAGrB,IAAIC,EAASkF,EAAyBE,GAAY,CAGjDrF,QAAS,CAAC,GAOX,OAHAwF,EAAoBH,GAAUpF,EAAQA,EAAOD,QAASoF,GAG/CnF,EAAOD,OACf,CCrBAoF,EAAoBK,EAAKxF,IACxB,IAAIyF,EAASzF,GAAUA,EAAO0F,WAC7B,IAAO1F,EAAiB,QACxB,IAAM,EAEP,OADAmF,EAAoBQ,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdN,EAAoBQ,EAAI,CAAC5F,EAAS8F,KACjC,IAAI,IAAIC,KAAOD,EACXV,EAAoBY,EAAEF,EAAYC,KAASX,EAAoBY,EAAEhG,EAAS+F,IAC5EE,OAAOC,eAAelG,EAAS+F,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDX,EAAoBY,EAAI,CAAC1E,EAAK+E,IAAUJ,OAAOK,UAAUC,eAAeC,KAAKlF,EAAK+E,GCClFjB,EAAoBqB,EAAKzG,IACH,oBAAX0G,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAelG,EAAS0G,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAelG,EAAS,aAAc,CAAE4G,OAAO,GAAO,ECL9DxB,EAAoByB,QAAKtB,yGCKlB,SAASuB,EAAWC,GACzB,IAAMC,EAASD,EAASC,OAAOC,MAAM,GAC/BzG,EAAS,CAAC,EAOhB,OANAwG,EACGE,MAAM,KACNC,KAAI,SAAAC,GAAC,OAAIA,EAAEF,MAAM,IAAI,IACrBG,SAAQ,SAAArG,GACPR,EAAOQ,EAAK,IAAMA,EAAK,EACzB,IACKR,CACT,CCTO,SAAS8G,EAAYC,GAG1B,OAFAC,QAAQC,IAAI,4CACZrE,OAAOsE,iBAAiB,WAAYH,GAC7B,kBAAMnE,OAAOuE,oBAAoB,WAAYJ,EAAG,CACzD,CAOO,SAASK,EAAQL,GAEtB,OADAnE,OAAOsE,iBAAiB,OAAQH,GACzB,kBAAMnE,OAAOuE,oBAAoB,OAAQJ,EAAG,CACrD,CAOO,SAASM,EAAWN,GAEzB,OADAnE,OAAOsE,iBAAiB,UAAWH,GAC5B,kBAAMnE,OAAOuE,oBAAoB,UAAWJ,EAAG,CACxD,CCjBO,SAASO,EACd7G,GAGA,IAwBI8G,EA1BJC,EAAOC,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,SAAAC,GAAE,OAAIC,QAAQD,EAAG,EAC3BE,EAAIH,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,wBAEP,SAASI,EAAQpH,EAAIqH,EAAUF,GAC7B,KAAIlF,UAAYE,QAAUA,OAAOmF,uBAkB/B,MAAM7E,MAAM,yBAjBZ,IAAMwE,EAAKhF,SAASsF,eAAevH,GAEnC,GAAK+G,EAAQE,GAYX,OAAOI,EAASJ,GAXH,0BAATE,GACFG,uBAAsB,WACpBF,EAAOpH,EAAIqH,EAAUF,EACvB,IAEW,eAATA,GACFK,YAAW,WACTJ,EAAOpH,EAAIqH,EAAUF,EACvB,GAQR,CAGA,OAAO,IAAIM,SAAQ,SAAAC,GACjBZ,EAAWY,EACXN,EACEpH,GACA,SAAAiH,GACEO,YAAW,WACTV,EAASG,EACX,GACF,GACAE,EAEJ,GACF,gjDC1BaQ,EAAW,SAAAC,yRAAAC,CAAAF,EAAAC,GAAA,QAAAE,KAAAH,urBACtB,SAAAA,IAAe,OAAAI,EAAA,KAAAJ,GAAAG,EAAAvC,KAAA,KAEf,CA2BC,OA1BDyC,EAAAL,EAAA,EAAA7C,IAAA,OAAAa,MAMA,SAAM0B,GAAwB,IAAdY,EAAQjB,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,EACzB,OAAAkB,EAAAC,EAAAR,EAAAtC,WAAA,aAAAE,KAAA,KAAkB8B,EAAUY,EAC9B,GACA,CAAAnD,IAAA,MAAAa,MAKA,SAAK0B,GACH,OAAOe,KAAKpH,KAAKqG,EACnB,GACA,CAAAvC,IAAA,MAAAa,MAKA,SAAKpG,GACH,OAAO6I,KAAKC,MAAMC,QAAO,SAACC,EAAKC,EAAKhH,GAClC,OAAOgH,EAAID,EACb,GAAGhJ,EACL,KAACoI,CAAA,CA9BqB,CA5BP,WACf,SAAAc,EAAahJ,GAAQsI,EAAA,KAAAU,GACnBL,KAAKC,WAAmB,IAAX5I,EAAoB,GAAK,IAAIiJ,MAAMjJ,EAClD,CAmBC,OAlBDuI,EAAAS,EAAA,EAAA3D,IAAA,OAAAa,MAMA,SAAM0B,GAAwB,IAAAsB,EAAA,KAAdV,EAAQjB,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,EAOzB,OANiB,IAAbiB,GACFG,KAAKC,MAAMrH,KAAKqG,GAED,IAAbY,GACFG,KAAKC,MAAMO,QAAQvB,GAEd,kBACLsB,EAAKN,MAAMtH,OACT4H,EAAKN,MAAMQ,WAAU,SAAAC,GAAE,OAAIA,IAAOzB,CAAQ,IAC1C,EACD,CACL,KAACoB,CAAA,CAtBc,ICAjB,MACA,GACEM,WAFmC,oBAAXC,QAA0BA,OAAOD,YAAcC,OAAOD,WAAWE,KAAKD,SCGhG,IAAIE,EACJ,MAAMC,EAAQ,IAAIC,WAAW,IACd,SAASC,IAEtB,IAAKH,IAEHA,EAAoC,oBAAXF,QAA0BA,OAAOE,iBAAmBF,OAAOE,gBAAgBD,KAAKD,SAEpGE,GACH,MAAM,IAAIzG,MAAM,4GAIpB,OAAOyG,EAAgBC,EACzB,CCXA,MAAMG,EAAY,GAElB,IAAK,IAAI9J,EAAI,EAAGA,EAAI,MAAOA,EACzB8J,EAAUtI,MAAMxB,EAAI,KAAO+J,SAAS,IAAIvD,MAAM,ICmBhD,QAxBA,SAAYpG,EAAS4J,EAAKC,GACxB,GAAI,eAAsBD,IAAQ5J,EAChC,OAAO,eAIT,MAAM8J,GADN9J,EAAUA,GAAW,CAAC,GACD+J,SAAW/J,EAAQyJ,KAAOA,KAK/C,GAHAK,EAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,GAAVA,EAAK,GAAY,IAEvBF,EAAK,CACPC,EAASA,GAAU,EAEnB,IAAK,IAAIjK,EAAI,EAAGA,EAAI,KAAMA,EACxBgK,EAAIC,EAASjK,GAAKkK,EAAKlK,GAGzB,OAAOgK,CACT,CAEA,ODbK,SAAyBI,EAAKH,EAAS,GAG5C,OAAQH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAM,IAAMH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAM,IAAMH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAM,IAAMH,EAAUM,EAAIH,EAAS,IAAMH,EAAUM,EAAIH,EAAS,IAAM,IAAMH,EAAUM,EAAIH,EAAS,KAAOH,EAAUM,EAAIH,EAAS,KAAOH,EAAUM,EAAIH,EAAS,KAAOH,EAAUM,EAAIH,EAAS,KAAOH,EAAUM,EAAIH,EAAS,KAAOH,EAAUM,EAAIH,EAAS,MAAMI,aACvf,CCSSC,CAAgBJ,EACzB,g3CCpBO,IAAMK,EAAO,WAOlB,SAAAA,EAAaC,GAA4B,IAAdpK,EAAOoH,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,CAAC,+FAACe,CAAA,KAAAgC,GACrC3B,KAAK6B,aAAerK,EAAQqK,cAAgB,IAC5C7B,KAAK8B,QAAUtK,EAAQsK,SAAW,IAClC9B,KAAK+B,IAAMvK,EAAQwK,WAAa,UAGhChC,KAAKiC,2BAA6B,IAAI1C,EAGtCS,KAAKkC,mBAAqB,IAAI3C,EAC9BS,KAAKmC,QAAUnC,KAAKoC,eACtB,SAgGC,SA/FDT,KAAA,EAAAjF,IAAA,gBAAAa,MAIA,WAAiB,IAAAgD,EAAA,KACf,OAAO/B,GAAU,SAAArE,GAAK,IAAAkI,GACK,KAAf,QAANA,EAAAlI,EAAEmI,YAAI,IAAAD,OAAA,EAANA,EAAQE,WACVpI,EAAEqI,OAAOC,YAAWC,EAAAA,EAAC,CAAD,EACbnC,EAAK0B,2BAA2BU,IAAIxI,EAAEmI,OAAK,IAAEC,UAAU,IAC5DpI,EAAEyI,OAGR,GACF,GACA,CAAAlG,IAAA,eAAAa,MAOA,SAAcsF,EAAKlJ,GAAQ,IAAAmJ,EAAA,KACnBhB,EAAUe,EAAIf,SAAW9B,KAAK8B,QAChCiB,GAAW,EACf,GAAIpJ,EAAQ,CACV,IAAIqJ,EAAUC,EACRrL,EAAKsL,IACLC,EAAS3E,GAAU,SAAA4E,GACvB,IAAQd,EAASc,EAATd,MACJA,aAAI,EAAJA,EAAM1K,MAAOA,GAAM0K,EAAKe,SAAWP,EAAKf,MAC1CgB,GAAW,EACXC,EAASV,EAAKA,MACda,IAEJ,IACA,OAAO,IAAI9D,SAAQ,SAACC,EAASgE,GAC3BN,EAAW1D,EACX2D,EAAWK,EAEX,IAAMhB,EAAOQ,EAAKZ,mBAAmBS,IAAIE,GACzClJ,EAAO8I,YACL,CACE7K,GAAAA,EACA0K,KAAAA,EACAe,OAAQP,EAAKf,IACbQ,UAAU,GAEZ,KAEFnD,YAAW,WACJ2D,IACHE,EAAS,mDACTE,IAEJ,GAAGrB,EACL,GACF,CACE,OAAOzC,QAAQiE,OAAO,iBAE1B,GAEA,CAAA5G,IAAA,OAAAa,MAOA,SAAM5D,EAAQkJ,GACZ,OAAO7C,KAAKuD,aAAaV,EAAKlJ,GAAQ6J,MACpC,SAAAJ,GACE,OAAOA,CACT,IACA,SAAAK,GACE,OAAOpE,QAAQiE,OAAOG,EACxB,GAEJ,GACA,CAAA/G,IAAA,KAAAa,MAKA,SAAIW,GAAI,IAAAwF,EAAA,KACN,OAAOlF,GAAU,SAAAmF,GAAS,IAAAC,EAAAC,GACpBF,SAAW,QAANC,EAALD,EAAOrB,YAAI,IAAAsB,OAAN,EAALA,EAAaP,UAAWK,EAAK3B,MAAgC,KAAf,QAAV8B,EAAAF,EAAMrB,YAAI,IAAAuB,OAAA,EAAVA,EAAYtB,WAClDrE,EAAGyF,EAAMrB,KAAKA,KAElB,GACF,GACA,CAAA5F,IAAA,UAAAa,MAGA,WACEyC,KAAKmC,SACP,0EAACR,CAAA,CAlHiB,GCIPmC,EAAwB,w3CAErC/J,OAAO+J,GAAyB,CAC9BC,KAAM,QCRR,IAAMC,EAAc,IAAIC,IAElBC,EAAgB,IAAIC,QAMpBC,EAAW,IAAIH,IAKRI,EAAO,SAAAC,yRAAA7E,CAAA4E,EAAAC,GAAA,YAAA5E,KAAA2E,+jBAOlB,SAAAA,EAAa1K,GAAsB,IAAA4G,EAAd/I,EAAOoH,UAAAvH,OAAA,QAAA6E,IAAA0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAKL,mGALMe,CAAA,KAAA0E,IAC/B9D,EAAAb,EAAAvC,KAAA,KAAMxD,EAAQnC,IACT+M,QAAU/M,EAAQ+M,QACvBhE,EAAKiE,iBAAmBhN,EAAQgN,kBAAoB,eACpDjE,EAAKkE,gBAAeC,EAAAnE,IACpBA,EAAKoE,eAAcD,EAAAnE,IAAMA,CAC3B,CAmNC,SAjND8D,KAAA,EAAA3H,IAAA,aAAAa,MAMA,SAAYqH,GAAK,IAAAC,EAAAC,EAAAhC,EAAA,KACf9C,KAAKuE,QAAUK,EAEM,QAArBC,EAAA7E,KAAK+E,wBAAgB,IAAAF,GAArBA,EAAA1H,KAAA6C,MACqB,QAArB8E,EAAA9E,KAAKgF,wBAAgB,IAAAF,GAArBA,EAAA3H,KAAA6C,MAEIjG,OAAOkL,SAAWlL,SACpBA,OAAOkL,OAAOxC,YAAY,UAAW,KACrCzC,KAAKkF,KAAKnL,OAAOkL,OAAQ,CACvBtL,OAAQ,SACRoF,KAAM,aAELyE,MAAK,SAAAJ,GACJ,OAAON,EAAKoC,KAAKnL,OAAOkL,OAAQ,CAC9BtL,OAAQ,OACRoF,KAAM,UAEV,IACCyE,MAAK,SAAAJ,GACJ+B,aAAaC,QAAQtC,EAAK0B,iBAAkBrJ,KAAKC,UAAUgI,EAAId,MACjE,KAGJtC,KAAKgF,iBAAmBhF,KAAKqF,IAAG,SAAAjC,GAC9B,IAAMkC,EAAelC,EAAImC,WACzB,GAAiB,aAAbnC,EAAIrE,KAAqB,CAE3B,IAAMF,EAAKhF,SAASsF,eAAe,WAAamG,GAC5CzG,EACFiE,EAAK0C,YAAYF,EAAczG,GAE/BV,QAAQsH,MAAM,uCAElB,CACF,IAEAzF,KAAK0F,gBAAkB1F,KAAK2F,YAC9B,GAEA,CAAAjJ,IAAA,OAAAa,MAQA,SAAM5D,EAAQkJ,GAAK,IAAAa,EAAA,KAKjB,GAJAb,EAAI0C,gBACiBrJ,IAAnB2G,EAAI0C,WAA2BvF,KAAKuE,QAAU1B,EAAI0C,WACpD1C,EAAI+C,SAAkB1J,IAAZ2G,EAAI+C,KAA2B/C,EAAI+C,IAExCjM,EAWH,OAAAmG,EAAAC,EAAAsE,EAAApH,WAAA,aAAAE,KAAA,KAAkBxD,EAAQkJ,GAV1B,IAAMoC,EAASlL,OAAOkL,SAAWlL,OAAS,CAACA,OAAOkL,QAAU,GACtDY,EAAU,GAIhB,OAHA7B,EAAYhG,SAAQ,SAACT,EAAOb,GAC1BmJ,EAAQjN,KAAK2E,EAAMuI,cACrB,IACOzG,QAAQ0G,IACbd,EAAOlN,OAAO8N,GAAS/H,KAAI,SAAAkI,GAAG,OAAAlG,EAAAC,EAAAsE,EAAApH,WAAA,OAAAyG,GAAAvG,KAAAuG,EAAesC,EAAKnD,EAAG,IAM3D,GACA,CAAAnG,IAAA,KAAAa,MAOA,SAAIW,GAAI,IAAA+H,EAAA,KACN,OAAAnG,EAAAC,EAAAsE,EAAApH,WAAA,WAAAE,KAAA,MAAgB,SAAA0F,GAGZA,EAAIlJ,SAAWsM,EAAK1B,SACL,WAAf1B,EAAIlJ,QACW,WAAfkJ,EAAIlJ,QAEJuE,EAAG2E,EAEP,GACF,GAEA,CAAAnG,IAAA,cAAAa,MAKA,SAAagH,EAAS5K,GAChBqK,EAAYkC,IAAI3B,KACpBP,EAAYmC,IAAI5B,EAAS5K,GACzBuK,EAAciC,IAAIxM,EAAQ4K,GAC5B,GACA,CAAA7H,IAAA,gBAAAa,MAIA,SAAegH,GACb,OAAOP,EAAW,OAAQO,EAC5B,GACA,CAAA7H,IAAA,SAAAa,MAIA,SAAQ5D,GACN,IAAIyJ,EACJ,GAAIzJ,aAAkBK,kBAAmB,CACvC,IAAMoM,EAAUlC,EAAcnH,IAAIpD,GAC9ByM,IAAShD,EAAM,CAACgD,EAASJ,KAC/B,CACA,GAAsB,iBAAXrM,EAAqB,CAC9B,IAAMqM,EAAM9B,EAAcnH,IAAIpD,GAC1BqM,IAAK5C,EAAM,CAACgD,QAASJ,GAC3B,CAEA,OADK5C,GAAKjF,QAAQkI,KAAK,6BAA8B1M,EAAQqK,GACtDZ,CACT,GACA,CAAA1G,IAAA,UAAAa,MAGA,WACEyC,KAAKgF,mBACLhF,KAAK+E,mBACLjF,EAAAC,EAAAsE,EAAApH,WAAA,gBAAAE,KAAA,KACF,GAEA,CAAAT,IAAA,WAAAa,MAIA,SAAU+H,GAGR,OADMlB,EAASrH,IAAIuI,EAErB,GACA,CAAA5I,IAAA,WAAAa,MAMA,SAAU+H,EAAcgB,GACtB,OAAOlC,EAAS+B,IAAIb,EAAcgB,EACpC,GACA,CAAA5J,IAAA,kBAAAa,MAIA,SAAiBgJ,GAAS,IAAAC,EAAA,KACxBD,EAAQtE,2BAA2BrJ,MAAK,SAAA0J,GAAQ,IAAAmE,EAC9C,GAAyB,YAArBnE,SAAU,QAANmE,EAAJnE,EAAMA,YAAI,IAAAmE,OAAN,EAAJA,EAAY1H,MAAmB,CAEjC,IAAM2H,EAASvL,KAAKwL,MAAMxB,aAAayB,QAAQJ,EAAKhC,mBACpDlC,EAAKA,KAAKA,KAAOvI,OAAO+J,IAA0B4C,CACpD,CACA,OAAOpE,CACT,GACF,GAAC,CAAA5F,IAAA,aAAAa,MAED,WAAc,IAAAsJ,EAAA,KACZ,OAAA/G,EAAAC,EAAAsE,EAAApH,WAAA,WAAAE,KAAA,MAAgB,SAAA0F,GAEK,WAAfA,EAAIlJ,QAAuBkJ,EAAIlJ,SAAWkN,EAAKtC,UACjDpG,QAAQC,IACN,+BACAyE,EACAgE,EAAKtC,UAAY1B,EAAIlJ,OACrBkN,EAAKtC,SAEc,SAAjBsC,EAAKtC,UAAoB1B,EAAI+C,KAAM,GAEpB,SAAf/C,EAAIlJ,OACFI,OAAOkL,SAAWlL,QAAQ8M,EAAK3B,KAAKnL,OAAOkL,OAAQpC,IAGvDmB,EAAYhG,SAAQ,SAACgI,EAAKI,GACpBA,IAAYvD,EAAI0C,YAClBsB,EAAK3B,KAAKc,EAAIF,cAAejD,EAEjC,IACI9I,OAAOkL,SAAWlL,SAAsB,IAAZ8I,EAAI+C,KAClCiB,EAAK3B,KAAKnL,OAAOkL,OAAQpC,IAIjC,GACF,GAEA,CAAAnG,IAAA,iBAAAa,MAIA,SAAgBgJ,GACdA,EAAQtE,2BAA2B6E,KAAI,SAAAjE,GAKrC,MAJsB,UAAlBA,EAAIP,KAAKvD,OACXZ,QAAQC,IAAI,iBAAkByE,GAC9BA,EAAIP,KAAKA,KAAO8B,EAASrH,IAAI8F,EAAIP,KAAKiD,aAEjC1C,CACT,GACF,0EAACwB,CAAA,CAhOiB,CAAS1C,mvCCZtB,IAAMoF,EAAkB,SAAAC,yRAAAvH,CAAAsH,EAAAC,GAAA,YAAAtH,KAAAqH,urBAO7B,SAAAA,EAAapN,EAAQnC,GAAS,mGAAAmI,CAAA,KAAAoH,GAAArH,EAAAvC,KAAA,KACtBxD,EAAQnC,EAChB,CAoKC,SAnKDuP,KAAA,EAAArK,IAAA,QAAAa,MAKA,SAAOsF,GACL,IAAIlJ,EACJ,IAAKkJ,EAAIlJ,SAAWkJ,EAAI9D,KAAM,MAAM1E,MAAM,wBAC1C,IAAM4M,EAAYpE,EAAIlJ,OAEtB,IACiB,SAAdsN,GAAsC,WAAdA,IACzBlN,OAAOkL,SAAWlL,OAGlB,OADAJ,EAASI,OAAOkL,OAChBnF,EAAAC,EAAAgH,EAAA9J,WAAA,aAAAE,KAAA,KAAkBxD,EAAQkJ,GAI5B,IAAMqE,EAAalH,KAAKmH,OAAOF,GAY/B,OAXIA,aAAqBjN,mBAAqBkN,IAC5CrE,EAAIlJ,OAASuN,EAAW,GACxBvN,EAASsN,EAAUnB,eAGI,iBAAdmB,GAA0BC,IAGnCvN,EADYuN,EAAW,GACVpB,eAEVnM,GAAQwE,QAAQkI,KAAK,kCAC1BvG,EAAAC,EAAAgH,EAAA9J,WAAA,aAAAE,KAAA,KAAkBxD,EAAQkJ,EAC5B,GACA,CAAAnG,IAAA,MAAAa,MAKA,SAAKgJ,EAASxH,EAAMb,GAClB,IAAIkJ,EACJ,GAAsB,iBAATrI,GAAqC,mBAATA,EACvC,MAAM1E,MAAM,yBAOd,OALIkM,GACFA,EAAQc,IAAI,sBAAsB,WAAM,IAAAC,EAC9B,QAARA,EAAAF,SAAQ,IAAAE,GAARA,GACF,IAEkB,mBAATvI,EACTqI,EAAQtH,EAAAC,EAAAgH,EAAA9J,WAAA,WAAAE,KAAA,MAAY,SAAA0F,GAClB9D,EAAK8D,EACP,KAGFuE,EAAQtH,EAAAC,EAAAgH,EAAA9J,WAAA,WAAAE,KAAA,MAAY,SAAA0F,GACdA,EAAI9D,OAASA,GACfb,EAAG2E,EAAIP,KAEX,IACAnE,QAAQC,IAAI,6BAA8BW,GACnCqI,EACT,GAEA,CAAA1K,IAAA,eAAAa,MAOA,SAAc5D,EAAQuE,EAAIqJ,GACxB,GAAkB,mBAAPrJ,QAAgChC,IAAXqL,EAC9B,MAAMlN,MAAM,iCAEd,IAAKV,EACH,MAAMU,MAAM,kBAEd,OAAO2F,KAAKwH,MAAM,CAChBzI,KAAM,WACNpF,OAAQA,EACR2I,KAAM,CACJrD,SAAUf,EAAGiD,WACboG,OAAQA,IAGd,GACA,CAAA7K,IAAA,aAAAa,MAMA,SAAYgJ,EAASrI,GACnB,OAAO8B,KAAKqH,IAAId,GAAS,SAAA1D,GACvB,GAAiB,aAAbA,EAAI9D,KAAqB,CAC3B,IAAMuD,EAAOO,EAAIP,KACjB,GAAoB,OAAhBA,EAAKiF,OAAiB,CACxB,IAAME,EAAa7K,OAAO8K,KAAKpF,EAAKiF,QAC9BI,EAAc/K,OAAOgL,OAAOtF,EAAKiF,QACjCM,EAAOC,SAAQxM,WAAC,EACjBmM,EAAU1P,OAAA,KAAAA,OACTuK,EAAKrD,SAAQ,MAAAlH,OAAK0P,EAAWM,KAAK,KAAI,QAE5C7J,GAAG,SAAU8J,GACXH,EAAKvM,MAAM0M,EAAKL,EAClB,GACF,KAAO,CACL,IAAME,EAAOC,SAAS,IAAD/P,OAAKuK,EAAKrD,SAAQ,QACvCf,GAAG,SAAU8J,GACXH,EAAKvM,MAAM0M,EACb,GACF,CACF,CACF,GACF,GAEA,CAAAtL,IAAA,YAAAa,MAIA,WACE,IAAM0K,EAAM9C,aAAayB,QAAQ5G,KAAKwE,kBACtC,GAAIyD,EAAK,CACP,IAAMvB,EAASvL,KAAKwL,MAAMsB,GAC1B,OAAO5I,QAAQC,QAAQoH,EACzB,CACE,OAAO1G,KAAKwH,MAAM,CAChBzI,KAAM,SACNpF,OAAQ,QAGd,GACA,CAAA+C,IAAA,YAAAa,MAKA,SAAW+H,EAAcgB,GAEvB,OADAtG,KAAKkI,SAAS5C,EAAcgB,GACrBtG,KAAKwH,MAAM,CAChBzI,KAAM,QACNpF,OAAQ2L,EACRhD,KAAMgE,GAEV,GACA,CAAA5J,IAAA,UAAAa,MAOA,SAASW,EAAIqI,GAKX,OAJAvG,KAAKwH,MAAM,CACT7N,OAAQ,SACRoF,KAAM,UACLyE,MAAK,SAAAJ,GAAG,OAAIlF,EAAGkF,EAAId,KAAK,IACpBtC,KAAKqH,IAAId,GAAS,SAAA1D,GACvB,GAAiB,UAAbA,EAAI9D,KAAkB,CACxB,IAAMuD,EAAOO,EAAIP,KACjBpE,EAAGoE,EACL,CACF,GACF,0EAACyE,CAAA,CA7K4B,CAAS1C,GCNpC8D,EAAS,WACX,IAAIC,EAAMpI,KAEV,OAAOqI,EADAD,EAAIE,MAAMD,IACP,SAAU,CAClBE,IAAK,SACLC,YAAa,oBACbC,MAAOL,EAAIM,UACXC,MAAO,CAAEC,MAAOR,EAAIxQ,GAAIiR,IAAKT,EAAIS,IAAKjR,GAAIwQ,EAAIxQ,KAElD,qPCIAkR,EAAA,kBAAAnS,CAAA,MAAAA,EAAA,GAAAoS,EAAAnM,OAAAK,UAAA+L,EAAAD,EAAA7L,eAAAL,EAAAD,OAAAC,gBAAA,SAAA5E,EAAAyE,EAAAuM,GAAAhR,EAAAyE,GAAAuM,EAAA1L,KAAA,EAAA2L,EAAA,mBAAA7L,OAAAA,OAAA,GAAA8L,EAAAD,EAAAE,UAAA,aAAAC,EAAAH,EAAAI,eAAA,kBAAAC,EAAAL,EAAA5L,aAAA,yBAAAzG,EAAAoB,EAAAyE,EAAAa,GAAA,OAAAX,OAAAC,eAAA5E,EAAAyE,EAAA,CAAAa,MAAAA,EAAAT,YAAA,EAAA0M,cAAA,EAAAC,UAAA,IAAAxR,EAAAyE,EAAA,KAAA7F,EAAA,aAAA4M,GAAA5M,EAAA,SAAAoB,EAAAyE,EAAAa,GAAA,OAAAtF,EAAAyE,GAAAa,CAAA,WAAAmM,EAAAC,EAAAC,EAAA7S,EAAA8S,GAAA,IAAAC,EAAAF,GAAAA,EAAA3M,qBAAA8M,EAAAH,EAAAG,EAAAC,EAAApN,OAAAqN,OAAAH,EAAA7M,WAAAsJ,EAAA,IAAA2D,EAAAL,GAAA,WAAAhN,EAAAmN,EAAA,WAAAzM,MAAA4M,EAAAR,EAAA5S,EAAAwP,KAAAyD,CAAA,UAAAI,EAAA1J,EAAAzI,EAAAoS,GAAA,WAAAtL,KAAA,SAAAsL,IAAA3J,EAAAvD,KAAAlF,EAAAoS,GAAA,OAAA5G,GAAA,OAAA1E,KAAA,QAAAsL,IAAA5G,EAAA,EAAA9M,EAAA+S,KAAAA,EAAA,IAAAY,EAAA,YAAAP,IAAA,UAAAQ,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAA5T,EAAA4T,EAAAtB,GAAA,8BAAAuB,EAAA9N,OAAA+N,eAAAC,EAAAF,GAAAA,EAAAA,EAAA9C,EAAA,MAAAgD,GAAAA,IAAA7B,GAAAC,EAAA7L,KAAAyN,EAAAzB,KAAAsB,EAAAG,GAAA,IAAAC,EAAAL,EAAAvN,UAAA8M,EAAA9M,UAAAL,OAAAqN,OAAAQ,GAAA,SAAAK,EAAA7N,GAAA,0BAAAe,SAAA,SAAA+M,GAAAlU,EAAAoG,EAAA8N,GAAA,SAAAV,GAAA,YAAAW,QAAAD,EAAAV,EAAA,gBAAAY,EAAAjB,EAAAkB,GAAA,SAAAC,EAAAJ,EAAAV,EAAA/K,EAAAgE,GAAA,IAAA8H,EAAAhB,EAAAJ,EAAAe,GAAAf,EAAAK,GAAA,aAAAe,EAAArM,KAAA,KAAA5H,EAAAiU,EAAAf,IAAA9M,EAAApG,EAAAoG,MAAA,OAAAA,GAAA,UAAA8N,EAAA9N,IAAAyL,EAAA7L,KAAAI,EAAA,WAAA2N,EAAA5L,QAAA/B,EAAA+N,SAAA9H,MAAA,SAAAjG,GAAA4N,EAAA,OAAA5N,EAAA+B,EAAAgE,EAAA,aAAAG,GAAA0H,EAAA,QAAA1H,EAAAnE,EAAAgE,EAAA,IAAA4H,EAAA5L,QAAA/B,GAAAiG,MAAA,SAAA+H,GAAApU,EAAAoG,MAAAgO,EAAAjM,EAAAnI,EAAA,aAAAsO,GAAA,OAAA0F,EAAA,QAAA1F,EAAAnG,EAAAgE,EAAA,IAAAA,EAAA8H,EAAAf,IAAA,KAAAmB,EAAA3O,EAAA,gBAAAU,MAAA,SAAAwN,EAAAV,GAAA,SAAAoB,IAAA,WAAAP,GAAA,SAAA5L,EAAAgE,GAAA6H,EAAAJ,EAAAV,EAAA/K,EAAAgE,EAAA,WAAAkI,EAAAA,EAAAA,EAAAhI,KAAAiI,EAAAA,GAAAA,GAAA,aAAAtB,EAAAR,EAAA5S,EAAAwP,GAAA,IAAAD,EAAA,iCAAAyE,EAAAV,GAAA,iBAAA/D,EAAA,UAAAjM,MAAA,iDAAAiM,EAAA,cAAAyE,EAAA,MAAAV,EAAA,OAAA9M,WAAArB,EAAAwP,MAAA,OAAAnF,EAAAwE,OAAAA,EAAAxE,EAAA8D,IAAAA,IAAA,KAAAsB,EAAApF,EAAAoF,SAAA,GAAAA,EAAA,KAAAC,EAAAC,EAAAF,EAAApF,GAAA,GAAAqF,EAAA,IAAAA,IAAAtB,EAAA,gBAAAsB,CAAA,cAAArF,EAAAwE,OAAAxE,EAAAuF,KAAAvF,EAAAwF,MAAAxF,EAAA8D,SAAA,aAAA9D,EAAAwE,OAAA,uBAAAzE,EAAA,MAAAA,EAAA,YAAAC,EAAA8D,IAAA9D,EAAAyF,kBAAAzF,EAAA8D,IAAA,gBAAA9D,EAAAwE,QAAAxE,EAAA0F,OAAA,SAAA1F,EAAA8D,KAAA/D,EAAA,gBAAA8E,EAAAhB,EAAAT,EAAA5S,EAAAwP,GAAA,cAAA6E,EAAArM,KAAA,IAAAuH,EAAAC,EAAAmF,KAAA,6BAAAN,EAAAf,MAAAC,EAAA,gBAAA/M,MAAA6N,EAAAf,IAAAqB,KAAAnF,EAAAmF,KAAA,WAAAN,EAAArM,OAAAuH,EAAA,YAAAC,EAAAwE,OAAA,QAAAxE,EAAA8D,IAAAe,EAAAf,IAAA,YAAAwB,EAAAF,EAAApF,GAAA,IAAA2F,EAAA3F,EAAAwE,OAAAA,EAAAY,EAAAvC,SAAA8C,GAAA,QAAAhQ,IAAA6O,EAAA,OAAAxE,EAAAoF,SAAA,eAAAO,GAAAP,EAAAvC,SAAA,SAAA7C,EAAAwE,OAAA,SAAAxE,EAAA8D,SAAAnO,EAAA2P,EAAAF,EAAApF,GAAA,UAAAA,EAAAwE,SAAA,WAAAmB,IAAA3F,EAAAwE,OAAA,QAAAxE,EAAA8D,IAAA,IAAA8B,UAAA,oCAAAD,EAAA,aAAA5B,EAAA,IAAAc,EAAAhB,EAAAW,EAAAY,EAAAvC,SAAA7C,EAAA8D,KAAA,aAAAe,EAAArM,KAAA,OAAAwH,EAAAwE,OAAA,QAAAxE,EAAA8D,IAAAe,EAAAf,IAAA9D,EAAAoF,SAAA,KAAArB,EAAA,IAAA8B,EAAAhB,EAAAf,IAAA,OAAA+B,EAAAA,EAAAV,MAAAnF,EAAAoF,EAAAU,YAAAD,EAAA7O,MAAAgJ,EAAA+F,KAAAX,EAAAY,QAAA,WAAAhG,EAAAwE,SAAAxE,EAAAwE,OAAA,OAAAxE,EAAA8D,SAAAnO,GAAAqK,EAAAoF,SAAA,KAAArB,GAAA8B,GAAA7F,EAAAwE,OAAA,QAAAxE,EAAA8D,IAAA,IAAA8B,UAAA,oCAAA5F,EAAAoF,SAAA,KAAArB,EAAA,UAAAkC,EAAAC,GAAA,IAAAC,EAAA,CAAAC,OAAAF,EAAA,SAAAA,IAAAC,EAAAE,SAAAH,EAAA,SAAAA,IAAAC,EAAAG,WAAAJ,EAAA,GAAAC,EAAAI,SAAAL,EAAA,SAAAM,WAAAnU,KAAA8T,EAAA,UAAAM,EAAAN,GAAA,IAAAtB,EAAAsB,EAAAO,YAAA,GAAA7B,EAAArM,KAAA,gBAAAqM,EAAAf,IAAAqC,EAAAO,WAAA7B,CAAA,UAAAlB,EAAAL,GAAA,KAAAkD,WAAA,EAAAJ,OAAA,SAAA9C,EAAA7L,QAAAwO,EAAA,WAAAU,OAAA,YAAAtF,EAAAuF,GAAA,GAAAA,EAAA,KAAAC,EAAAD,EAAAhE,GAAA,GAAAiE,EAAA,OAAAA,EAAAjQ,KAAAgQ,GAAA,sBAAAA,EAAAb,KAAA,OAAAa,EAAA,IAAAE,MAAAF,EAAA9V,QAAA,KAAAD,GAAA,EAAAkV,EAAA,SAAAA,IAAA,OAAAlV,EAAA+V,EAAA9V,QAAA,GAAA2R,EAAA7L,KAAAgQ,EAAA/V,GAAA,OAAAkV,EAAA/O,MAAA4P,EAAA/V,GAAAkV,EAAAZ,MAAA,EAAAY,EAAA,OAAAA,EAAA/O,WAAArB,EAAAoQ,EAAAZ,MAAA,EAAAY,CAAA,SAAAA,EAAAA,KAAAA,CAAA,SAAAA,KAAAgB,EAAA,UAAAA,IAAA,OAAA/P,WAAArB,EAAAwP,MAAA,UAAAnB,EAAAtN,UAAAuN,EAAA3N,EAAAgO,EAAA,eAAAtN,MAAAiN,EAAAhB,cAAA,IAAA3M,EAAA2N,EAAA,eAAAjN,MAAAgN,EAAAf,cAAA,IAAAe,EAAAgD,YAAA1W,EAAA2T,EAAAjB,EAAA,qBAAA5S,EAAA6W,oBAAA,SAAAC,GAAA,IAAAC,EAAA,mBAAAD,GAAAA,EAAAE,YAAA,QAAAD,IAAAA,IAAAnD,GAAA,uBAAAmD,EAAAH,aAAAG,EAAAE,MAAA,EAAAjX,EAAAkX,KAAA,SAAAJ,GAAA,OAAA7Q,OAAAkR,eAAAlR,OAAAkR,eAAAL,EAAAjD,IAAAiD,EAAAM,UAAAvD,EAAA3T,EAAA4W,EAAAlE,EAAA,sBAAAkE,EAAAxQ,UAAAL,OAAAqN,OAAAY,GAAA4C,CAAA,EAAA9W,EAAAqX,MAAA,SAAA3D,GAAA,OAAAiB,QAAAjB,EAAA,EAAAS,EAAAG,EAAAhO,WAAApG,EAAAoU,EAAAhO,UAAAoM,GAAA,0BAAA1S,EAAAsU,cAAAA,EAAAtU,EAAAsX,MAAA,SAAAtE,EAAAC,EAAA7S,EAAA8S,EAAAqB,QAAA,IAAAA,IAAAA,EAAA7L,SAAA,IAAA6O,EAAA,IAAAjD,EAAAvB,EAAAC,EAAAC,EAAA7S,EAAA8S,GAAAqB,GAAA,OAAAvU,EAAA6W,oBAAA5D,GAAAsE,EAAAA,EAAA5B,OAAA9I,MAAA,SAAArM,GAAA,OAAAA,EAAAuU,KAAAvU,EAAAoG,MAAA2Q,EAAA5B,MAAA,KAAAxB,EAAAD,GAAAhU,EAAAgU,EAAAtB,EAAA,aAAA1S,EAAAgU,EAAA1B,GAAA,0BAAAtS,EAAAgU,EAAA,qDAAAlU,EAAA+Q,KAAA,SAAA9C,GAAA,IAAAuJ,EAAAvR,OAAAgI,GAAA8C,EAAA,WAAAhL,KAAAyR,EAAAzG,EAAA9O,KAAA8D,GAAA,OAAAgL,EAAA0G,UAAA,SAAA9B,IAAA,KAAA5E,EAAArQ,QAAA,KAAAqF,EAAAgL,EAAA9B,MAAA,GAAAlJ,KAAAyR,EAAA,OAAA7B,EAAA/O,MAAAb,EAAA4P,EAAAZ,MAAA,EAAAY,CAAA,QAAAA,EAAAZ,MAAA,EAAAY,CAAA,GAAA3V,EAAAiR,OAAAA,EAAAsC,EAAAjN,UAAA,CAAA0Q,YAAAzD,EAAAgD,MAAA,SAAAmB,GAAA,QAAAC,KAAA,OAAAhC,KAAA,OAAAR,KAAA,KAAAC,WAAA7P,EAAA,KAAAwP,MAAA,OAAAC,SAAA,UAAAZ,OAAA,YAAAV,SAAAnO,EAAA,KAAA6Q,WAAA/O,QAAAgP,IAAAqB,EAAA,QAAAT,KAAA,WAAAA,EAAAW,OAAA,IAAAvF,EAAA7L,KAAA,KAAAyQ,KAAAP,OAAAO,EAAAhQ,MAAA,WAAAgQ,QAAA1R,EAAA,EAAAsS,KAAA,gBAAA9C,MAAA,MAAA+C,EAAA,KAAA1B,WAAA,GAAAE,WAAA,aAAAwB,EAAA1P,KAAA,MAAA0P,EAAApE,IAAA,YAAAqE,IAAA,EAAA1C,kBAAA,SAAA2C,GAAA,QAAAjD,KAAA,MAAAiD,EAAA,IAAApI,EAAA,cAAAqI,EAAAC,EAAAC,GAAA,OAAA1D,EAAArM,KAAA,QAAAqM,EAAAf,IAAAsE,EAAApI,EAAA+F,KAAAuC,EAAAC,IAAAvI,EAAAwE,OAAA,OAAAxE,EAAA8D,SAAAnO,KAAA4S,CAAA,SAAA1X,EAAA,KAAA2V,WAAA1V,OAAA,EAAAD,GAAA,IAAAA,EAAA,KAAAsV,EAAA,KAAAK,WAAA3V,GAAAgU,EAAAsB,EAAAO,WAAA,YAAAP,EAAAC,OAAA,OAAAiC,EAAA,UAAAlC,EAAAC,QAAA,KAAA2B,KAAA,KAAAS,EAAA/F,EAAA7L,KAAAuP,EAAA,YAAAsC,EAAAhG,EAAA7L,KAAAuP,EAAA,iBAAAqC,GAAAC,EAAA,SAAAV,KAAA5B,EAAAE,SAAA,OAAAgC,EAAAlC,EAAAE,UAAA,WAAA0B,KAAA5B,EAAAG,WAAA,OAAA+B,EAAAlC,EAAAG,WAAA,SAAAkC,GAAA,QAAAT,KAAA5B,EAAAE,SAAA,OAAAgC,EAAAlC,EAAAE,UAAA,YAAAoC,EAAA,UAAA3U,MAAA,kDAAAiU,KAAA5B,EAAAG,WAAA,OAAA+B,EAAAlC,EAAAG,WAAA,KAAAZ,OAAA,SAAAlN,EAAAsL,GAAA,QAAAjT,EAAA,KAAA2V,WAAA1V,OAAA,EAAAD,GAAA,IAAAA,EAAA,KAAAsV,EAAA,KAAAK,WAAA3V,GAAA,GAAAsV,EAAAC,QAAA,KAAA2B,MAAAtF,EAAA7L,KAAAuP,EAAA,oBAAA4B,KAAA5B,EAAAG,WAAA,KAAAoC,EAAAvC,EAAA,OAAAuC,IAAA,UAAAlQ,GAAA,aAAAA,IAAAkQ,EAAAtC,QAAAtC,GAAAA,GAAA4E,EAAApC,aAAAoC,EAAA,UAAA7D,EAAA6D,EAAAA,EAAAhC,WAAA,UAAA7B,EAAArM,KAAAA,EAAAqM,EAAAf,IAAAA,EAAA4E,GAAA,KAAAlE,OAAA,YAAAuB,KAAA2C,EAAApC,WAAAvC,GAAA,KAAA4E,SAAA9D,EAAA,EAAA8D,SAAA,SAAA9D,EAAA0B,GAAA,aAAA1B,EAAArM,KAAA,MAAAqM,EAAAf,IAAA,gBAAAe,EAAArM,MAAA,aAAAqM,EAAArM,KAAA,KAAAuN,KAAAlB,EAAAf,IAAA,WAAAe,EAAArM,MAAA,KAAA2P,KAAA,KAAArE,IAAAe,EAAAf,IAAA,KAAAU,OAAA,cAAAuB,KAAA,kBAAAlB,EAAArM,MAAA+N,IAAA,KAAAR,KAAAQ,GAAAxC,CAAA,EAAA6E,OAAA,SAAAtC,GAAA,QAAAzV,EAAA,KAAA2V,WAAA1V,OAAA,EAAAD,GAAA,IAAAA,EAAA,KAAAsV,EAAA,KAAAK,WAAA3V,GAAA,GAAAsV,EAAAG,aAAAA,EAAA,YAAAqC,SAAAxC,EAAAO,WAAAP,EAAAI,UAAAE,EAAAN,GAAApC,CAAA,kBAAAqC,GAAA,QAAAvV,EAAA,KAAA2V,WAAA1V,OAAA,EAAAD,GAAA,IAAAA,EAAA,KAAAsV,EAAA,KAAAK,WAAA3V,GAAA,GAAAsV,EAAAC,SAAAA,EAAA,KAAAvB,EAAAsB,EAAAO,WAAA,aAAA7B,EAAArM,KAAA,KAAAqQ,EAAAhE,EAAAf,IAAA2C,EAAAN,EAAA,QAAA0C,CAAA,YAAA/U,MAAA,0BAAAgV,cAAA,SAAAlC,EAAAd,EAAAE,GAAA,YAAAZ,SAAA,CAAAvC,SAAAxB,EAAAuF,GAAAd,WAAAA,EAAAE,QAAAA,GAAA,cAAAxB,SAAA,KAAAV,SAAAnO,GAAAoO,CAAA,GAAA3T,CAAA,UAAA2Y,EAAAC,EAAAjQ,EAAAgE,EAAAkM,EAAAC,EAAA/S,EAAA2N,GAAA,QAAA+B,EAAAmD,EAAA7S,GAAA2N,GAAA9M,EAAA6O,EAAA7O,KAAA,OAAAkI,GAAA,YAAAnC,EAAAmC,EAAA,CAAA2G,EAAAV,KAAApM,EAAA/B,GAAA8B,QAAAC,QAAA/B,GAAAiG,KAAAgM,EAAAC,EAAA,CDFAtH,EAAOuH,eAAgB,ECIvB,MCfmK,EDenK,CACA9B,KAAA,WACA+B,cAAA,EACAC,MAAA,CACA/G,IAAA,CACA9J,KAAA8Q,OACAC,UAAA,GAEAxK,aAAA,CACAvG,KAAA8Q,OACAC,UAAA,GAEAxJ,MAAA,CACAvH,KAAAnC,QAEA8L,UAAAmH,QAEAvN,KAAA,WACA,OACA1K,GAAA,gBAAA0N,aAEA,EACAyK,MAAA,CACAzJ,MAAA,CACA0J,MAAA,EACAC,WAAA,EACAC,QAAA,SAAAtL,GAAA,IA5BAlE,EA4BAH,EAAA,YA5BAG,EA4BAoI,IAAA+E,MAAA,SAAAsC,IAAA,OAAArH,IAAAY,MAAA,SAAA0G,GAAA,cAAAA,EAAA9B,KAAA8B,EAAA9D,MAAA,cAAA8D,EAAA9D,KAAA,EACA7N,EAAA8B,EAAA3I,IAAA,SAAAiH,GAAA,OAAAA,GAAAA,EAAAiH,aAAA,WAEAvF,EAAA8P,WACAC,UAAA/P,EAAA+E,aAAAV,GAAA,wBAAAwL,EAAA5B,OAAA,GAAA2B,EAAA,IAhCA,eAAApZ,EAAA,KAAAwZ,EAAA3R,UAAA,WAAAS,SAAA,SAAAC,EAAAgE,GAAA,IAAAiM,EAAA7O,EAAApF,MAAAvE,EAAAwZ,GAAA,SAAAf,EAAAjS,GAAA+R,EAAAC,EAAAjQ,EAAAgE,EAAAkM,EAAAC,EAAA,OAAAlS,EAAA,UAAAkS,EAAAhM,GAAA6L,EAAAC,EAAAjQ,EAAAgE,EAAAkM,EAAAC,EAAA,QAAAhM,EAAA,CAAA+L,OAAAtT,EAAA,OAiCA,IAIAsU,cAAA,WACA,KAAAH,WAAAI,cAAA,KAAAnL,aACA,qJEzCI9N,GAAU,CAAC,EAEfA,GAAQ6D,kBAAoB,KAC5B7D,GAAQiD,cAAgB,KAElBjD,GAAQiC,OAAS,UAAc,KAAM,QAE3CjC,GAAQsB,OAAS,KACjBtB,GAAQsD,mBAAqB,KAEhB,IAAI,KAAStD,IAKJ,MAAW,aAAiB,YClBlD,IAAIkZ,GCFW,SACbC,EACAxI,EACAyI,EACAC,EACAC,EACAC,EACAC,EACAC,GAGA,IAoBIC,EApBA1Z,EACuB,mBAAlBmZ,EAA+BA,EAAcnZ,QAAUmZ,EAuDhE,GApDIxI,IACF3Q,EAAQ2Q,OAASA,EACjB3Q,EAAQoZ,gBLbU,GKclBpZ,EAAQ2Z,WAAY,GAiDlBD,EACF,GAAI1Z,EAAQ4Z,WAAY,CAGtB5Z,EAAQ6Z,cAAgBH,EAExB,IAAII,EAAiB9Z,EAAQ2Q,OAC7B3Q,EAAQ2Q,OAAS,SAAkCoJ,EAAGhL,GAEpD,OADA2K,EAAK/T,KAAKoJ,GACH+K,EAAeC,EAAGhL,EAC3B,CACF,KAAO,CAEL,IAAIiL,EAAWha,EAAQia,aACvBja,EAAQia,aAAeD,EAAW,GAAGzZ,OAAOyZ,EAAUN,GAAQ,CAACA,EACjE,CAGF,MAAO,CACLva,QAASga,EACTnZ,QAASA,EAEb,CDvFgB,CACd,EACA2Q,GASF,SAAeuI,GAAiB,QERhC,IAAMgB,GAAY,IAAI3K,EAEtB,UACE4K,QAAO,SAAEC,GACP,GAAI7X,OAAOkL,SAAWlL,OAAQ,CAG5B,IAAMwN,EAASsK,EAAgB9X,OAAO2D,UAEtCgU,GAAUI,WAAWvK,EAAOjC,aAC9B,MAEEoM,GAAUI,WAAW,QAEvBlV,OAAOC,eAAe+U,EAAI3U,UAAW,aAAc,CACjDF,IAAG,WACD,OAAO2U,EACT,EACAvL,IAAG,SAAE4L,GACH,MAAM1X,MAAM,6BACd,IAEFuX,EAAIlB,UAAUsB,GAAAA,KAAkBA,GAClC","sources":["webpack://@gislife/micro-message/webpack/universalModuleDefinition","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@gislife/micro-message/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@gislife/micro-message/webpack/bootstrap","webpack://@gislife/micro-message/webpack/runtime/compat get default export","webpack://@gislife/micro-message/webpack/runtime/define property getters","webpack://@gislife/micro-message/webpack/runtime/hasOwnProperty shorthand","webpack://@gislife/micro-message/webpack/runtime/make namespace object","webpack://@gislife/micro-message/webpack/runtime/nonce","webpack://@gislife/micro-message/./src/util/getParams.js","webpack://@gislife/micro-message/./src/util/onEvent.js","webpack://@gislife/micro-message/./src/util/requestDom.js","webpack://@gislife/micro-message/./src/util/volume.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/native.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/rng.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://@gislife/micro-message/./node_modules/uuid/dist/esm-browser/v4.js","webpack://@gislife/micro-message/./src/core/Message.js","webpack://@gislife/micro-message/./src/core/Channel.default.js","webpack://@gislife/micro-message/./src/core/Channel.js","webpack://@gislife/micro-message/./src/ApplicationChannel.js","webpack://@gislife/micro-message/./src/microApp.vue","webpack://@gislife/micro-message/src/microApp.vue","webpack://@gislife/micro-message/./src/microApp.vue?fb87","webpack://@gislife/micro-message/./src/microApp.vue?2127","webpack://@gislife/micro-message/./src/microApp.vue?d935","webpack://@gislife/micro-message/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://@gislife/micro-message/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"micro-message\"] = factory();\n\telse\n\t\troot[\"micro-message\"] = factory();\n})(self, () => {\nreturn ","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","/**\r\n * @description 获取URL search参数\r\n * @param {Location} location\r\n * @returns {object}\r\n */\r\nexport function getParams (location) {\r\n  const search = location.search.slice(1)\r\n  const result = {}\r\n  search\r\n    .split('&')\r\n    .map(p => p.split('='))\r\n    .forEach(item => {\r\n      result[item[0]] = item[1]\r\n    })\r\n  return result\r\n}\r\n","import '../core/Channel.type'\r\n/**\r\n * @description 监听pagehide事件\r\n * @param {Function} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onPageHide (cb) {\r\n  console.log('page hide-------------------------------')\r\n  window.addEventListener('pagehide', cb)\r\n  return () => window.removeEventListener('pagehide', cb)\r\n}\r\n\r\n/**\r\n * @description 监听load事件\r\n * @param {Function} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onLoad (cb) {\r\n  window.addEventListener('load', cb)\r\n  return () => window.removeEventListener('load', cb)\r\n}\r\n\r\n/**\r\n * @description 监听message事件\r\n * @param {IGenericFunction<IMessageEventResponse,*>} cb 回调函数\r\n * @returns {Function} 取消回调的函数\r\n */\r\nexport function onMessage (cb) {\r\n  window.addEventListener('message', cb)\r\n  return () => window.removeEventListener('message', cb)\r\n}\r\n","/**\r\n * @callback judgeCallback\r\n * @param {?HTMLIFrameElement}\r\n * @returns {boolean}\r\n */\r\n\r\n/**\r\n *\r\n * @param {string} id 目标元素id\r\n * @param {?judgeCallback} judgeCb 确定元素获取成功的judge函数\r\n * @param {'requestAnimationFrame' | 'setTimeout'} [type='requestAnimationFrame'] 轮询函数类型\r\n * @returns {promise<HTMLIFrameElement | null>}\r\n */\r\nexport function requestDom (\r\n  id,\r\n  judgeCb = el => Boolean(el),\r\n  type = 'requestAnimationFrame'\r\n) {\r\n  function getDom (id, callback, type) {\r\n    if (document && window && window.requestAnimationFrame) {\r\n      const el = document.getElementById(id)\r\n\r\n      if (!judgeCb(el)) {\r\n        if (type === 'requestAnimationFrame') {\r\n          requestAnimationFrame(() => {\r\n            getDom(id, callback, type)\r\n          })\r\n        }\r\n        if (type === 'setTimeout') {\r\n          setTimeout(() => {\r\n            getDom(id, callback, type)\r\n          })\r\n        }\r\n      } else {\r\n        return callback(el)\r\n      }\r\n    } else {\r\n      throw Error(\"browser don't support\")\r\n    }\r\n  }\r\n\r\n  let resolver\r\n  return new Promise(resolve => {\r\n    resolver = resolve\r\n    getDom(\r\n      id,\r\n      el => {\r\n        setTimeout(() => {\r\n          resolver(el)\r\n        })\r\n      },\r\n      type\r\n    )\r\n  })\r\n}\r\n","class ArrayVolume {\r\n  constructor (length) {\r\n    this.queue = length === void 0 ? [] : new Array(length)\r\n  }\r\n  /**\r\n   * 加入一个回调函数到执行队列\r\n   * @param { Function } callback 回调函数\r\n   * @param { number } priority 优先级\r\n   * @returns { Function } remove函数 从队列中移除回调\r\n   */\r\n  push (callback, priority = 0) {\r\n    if (priority === 0) {\r\n      this.queue.push(callback)\r\n    }\r\n    if (priority === 1) {\r\n      this.queue.unshift(callback)\r\n    }\r\n    return () =>\r\n      this.queue.splice(\r\n        this.queue.findIndex(fn => fn === callback),\r\n        1\r\n      )\r\n  }\r\n}\r\n\r\n/**\r\n * @template T\r\n */\r\nexport class ChainRunner extends ArrayVolume {\r\n  constructor () {\r\n    super()\r\n  }\r\n  /**\r\n   * @description 加入一个回调函数到执行队列\r\n   * @param { IGenericFunction<T,T> } callback 回调函数\r\n   * @param { number } [priority=1] 优先级\r\n   * @returns { cancelCallback } remove函数 从队列中移除回调\r\n   */\r\n  push (callback, priority = 1) {\r\n    return super.push(callback, priority)\r\n  }\r\n  /**\r\n   * @description 加入一个回调函数到执行队列\r\n   * @param { IGenericFunction<T,T> } callback 回调函数\r\n   * @returns { cancelCallback } remove函数 从队列中移除回调\r\n   */\r\n  use (callback) {\r\n    return this.push(callback)\r\n  }\r\n  /**\r\n   * @description 链式执行回调队列中的回调函数\r\n   * @param  {*} result 执行参数\r\n   * @returns {T}\r\n   */\r\n  run (result) {\r\n    return this.queue.reduce((acc, cur, index) => {\r\n      return cur(acc)\r\n    }, result)\r\n  }\r\n}\r\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from 'uuid'\r\nimport { ChainRunner, onMessage } from '../util'\r\n\r\n/**\r\n * @class\r\n */\r\nexport class Message {\r\n  /**\r\n   * @description 初始化一个Channel\r\n   * @constructor\r\n   * @param {Window | WindowContent} targetWindow\r\n   * @param {MessageOpts} options Channel初始化options\r\n   */\r\n  constructor (targetWindow, options = {}) {\r\n    this.targetOrigin = options.targetOrigin || '*'\r\n    this.timeout = options.timeout || 3 * 1000\r\n    this.tag = options.namespace || 'gislife'\r\n    /**@description 默认回复响应的拦截器 */\r\n    /**@type ChainRunner<IMessage<IPostMessageSyntax<*>>> */\r\n    this.defaultResponseInterceptor = new ChainRunner()\r\n    /**@description 请求拦截器 */\r\n    /**@type ChainRunner<IPostMessageSyntax<*>> */\r\n    this.requestInterceptor = new ChainRunner()\r\n    this._cancel = this._initResponse()\r\n  }\r\n  /**\r\n   * @description 初始化消息默认回复事件\r\n   * @returns {cancelCallback} 取消默认回复事件\r\n   */\r\n  _initResponse () {\r\n    return onMessage(e => {\r\n      if (e.data?.response === false) {\r\n        e.source.postMessage(\r\n          { ...this.defaultResponseInterceptor.run(e.data), response: true },\r\n          e.origin\r\n        )\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * todo 包裹原生消息发生函数，保证消息唯一性,局部性;\r\n   * @description 发送消息\r\n   * @param {IPostMessageSyntax<T>} msg\r\n   * @param {HTMLIFrameElement.contentWindow} target\r\n   * @returns { Promise<IMessage<IPostMessageSyntax<T>>&{response:true}> }\r\n   */\r\n  _postMessage (msg, target) {\r\n    const timeout = msg.timeout || this.timeout\r\n    let isSendOK = false\r\n    if (target) {\r\n      let resolvor, rejector\r\n      const id = uuidv4()\r\n      const cancel = onMessage(res => {\r\n        const { data } = res\r\n        if (data?.id === id && data.belong === this.tag) {\r\n          isSendOK = true\r\n          resolvor(data.data)\r\n          cancel()\r\n        }\r\n      })\r\n      return new Promise((resolve, reject) => {\r\n        resolvor = resolve\r\n        rejector = reject\r\n        /** @type IPostMessageSyntax<*> */\r\n        const data = this.requestInterceptor.run(msg)\r\n        target.postMessage(\r\n          {\r\n            id,\r\n            data,\r\n            belong: this.tag,\r\n            response: false\r\n          },\r\n          '*'\r\n        )\r\n        setTimeout(() => {\r\n          if (!isSendOK) {\r\n            rejector('-----postMessage timeout,target maybe not ready')\r\n            cancel()\r\n          }\r\n        }, timeout)\r\n      })\r\n    } else {\r\n      return Promise.reject('missing target')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * todo 发送消息\r\n   * @description 发送消息\r\n   * @param {Window} target\r\n   * @param {IPostMessageSyntax<T>} msg 消息体\r\n   * @returns { Promise<T> } 确认消息发送成功的回调\r\n   */\r\n  send (target, msg) {\r\n    return this._postMessage(msg, target).then(\r\n      res => {\r\n        return res\r\n      },\r\n      err => {\r\n        return Promise.reject(err)\r\n      }\r\n    )\r\n  }\r\n  /**\r\n   * @description 监听消息 只监听接受消息\r\n   * @param {IGenericFunction<IPostMessageSyntax<*>,void>} cb 接收到消息的回调函数\r\n   * @returns {cancelCallback} 取消监听事件的函数\r\n   */\r\n  on (cb) {\r\n    return onMessage(event => {\r\n      if (event?.data?.belong === this.tag && event.data?.response === false) {\r\n        cb(event.data.data)\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 销毁连接器\r\n   */\r\n  destory () {\r\n    this._cancel()\r\n  }\r\n}\r\n","/**@description 支持的事件类型的集合 */\r\nexport const SUPPORT_MESSAGE_TYPE = [\r\n  'state',\r\n  'config',\r\n  'callback',\r\n  'emit',\r\n  'register',\r\n  'unregister'\r\n]\r\n\r\nexport const DEFAULT_GLOBAL_CONFIG = 'URL_CONFIG'\r\n\r\nwindow[DEFAULT_GLOBAL_CONFIG] = {\r\n  test: 'test'\r\n}\r\n","import { Message } from './Message'\r\nimport { onPageHide } from '../util'\r\nimport { DEFAULT_GLOBAL_CONFIG } from './Channel.default'\r\n\r\n/**@type {Map<microAppCode,microAppContext>} */\r\nconst microAppMap = new Map()\r\n/**@type {WeakMap<microAppContext,microAppCode>} */\r\nconst microAppElMap = new WeakMap()\r\n/**\r\n * @typedef {Map<microAppContext,object>} IStateMap\r\n * @description 组件状态Map\r\n * @type {IStateMap}\r\n */\r\nconst stateMap = new Map()\r\n\r\n/**\r\n * @class Channel\r\n */\r\nexport class Channel extends Message {\r\n  /**\r\n   * @description 新建一个目标连接频道\r\n   * @constructor\r\n   * @param { Window | windowContent} target 目标上下文\r\n   * @param {ChannelOpts} options 其它参数\r\n   */\r\n  constructor (target, options = {}) {\r\n    super(target, options)\r\n    this.appCode = options.appCode\r\n    this.localStorageName = options.localStorageName || 'globalConfig'\r\n    this._configResponse(this)\r\n    this._stateResponse(this)\r\n  }\r\n\r\n  /**\r\n   * !应用注册的主要逻辑\r\n   * @description 设置当前应用的AppCode\r\n   * @param {string} val\r\n   * @returns {void}\r\n   */\r\n  setAppCode (val) {\r\n    this.appCode = val\r\n    // todo 当前应用不是子应用，则向主应用注册\r\n    this.__pageHideCancel?.()\r\n    this.__maintainCancel?.()\r\n    // todo 自动向父级注册\r\n    if (window.parent !== window) {\r\n      window.parent.postMessage('message', '*')\r\n      this.send(window.parent, {\r\n        target: 'parent',\r\n        type: 'register'\r\n      }) //todo 自动拉取全局应用配置\r\n        .then(res => {\r\n          return this.send(window.parent, {\r\n            target: 'main',\r\n            type: 'config'\r\n          })\r\n        }) //todo 本地持久化\r\n        .then(res => {\r\n          localStorage.setItem(this.localStorageName, JSON.stringify(res.data))\r\n        })\r\n    }\r\n    // todo 维护子应用注册表\r\n    this.__maintainCancel = this.on(res => {\r\n      const microAppCode = res.sourceCode\r\n      if (res.type === 'register') {\r\n        //todo 注册\r\n        const el = document.getElementById('gislife-' + microAppCode)\r\n        if (el) {\r\n          this.registerApp(microAppCode, el)\r\n        } else {\r\n          console.error('register error, can not find element')\r\n        }\r\n      }\r\n    })\r\n    // todo 消息派发的主要逻辑\r\n    this.__cancelPassive = this._onPassive()\r\n  }\r\n\r\n  /**\r\n   * !消息派发的主要逻辑\r\n   * todo 如果消息没有target 默认target为 main\r\n   * @description 为每条消息带上popSource\r\n   * @param {IPostMessageSyntax<T>} msg\r\n   * @param {?Window} target\r\n   * @returns {Promise<IPostMessageSyntax<T>>}\r\n   */\r\n  send (target, msg) {\r\n    msg.sourceCode =\r\n      msg.sourceCode === undefined ? this.appCode : msg.sourceCode\r\n    msg.pop = msg.pop === undefined ? true : msg.pop\r\n    //todo 如果target不存在于当前Map则向全局发送消息\r\n    if (!target) {\r\n      const parent = window.parent !== window ? [window.parent] : []\r\n      const sibling = []\r\n      microAppMap.forEach((value, key) => {\r\n        sibling.push(value.contentWindow)\r\n      })\r\n      return Promise.all(\r\n        parent.concat(sibling).map(tar => super.send(tar, msg))\r\n      )\r\n    } else {\r\n      // todo如果target是'main'则直接向上传递消息；\r\n      return super.send(target, msg)\r\n    }\r\n  }\r\n  /**\r\n   * todo 响应自己的消息，如果不是自己的消息则传递消息\r\n   * @description 监听消息，并在自动取消监听\r\n   * @param {IGenericFunction<IPostMessageSyntax<*>,void>} cb 监听到消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消监听的回调函数\r\n   */\r\n  on (cb) {\r\n    return super.on(msg => {\r\n      // todo 如果消息的目标是当前目标或者为'parent'，则直接响应消息\r\n      if (\r\n        msg.target === this.appCode ||\r\n        msg.target === 'parent' ||\r\n        msg.target === 'global'\r\n      ) {\r\n        cb(msg)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description 注册子应用\r\n   * @param {string} appCode 子应用Code\r\n   * @param {HTMLIFrameElement} target 子应用Iframe元素\r\n   */\r\n  registerApp (appCode, target) {\r\n    if (microAppMap.has(appCode)) return\r\n    microAppMap.set(appCode, target)\r\n    microAppElMap.set(target, appCode)\r\n  }\r\n  /**\r\n   * @description 取消注册子应用\r\n   * @param {string} appCode 子应用Code\r\n   */\r\n  unRegisterApp (appCode) {\r\n    return microAppMap.delete(appCode)\r\n  }\r\n  /**\r\n   * @typedef {[string,HTMLIFrameElement] } targetLike\r\n   * @param {targetLike | undefined} target\r\n   */\r\n  getApp (target) {\r\n    let res\r\n    if (target instanceof HTMLIFrameElement) {\r\n      const tarCode = microAppElMap.get(target)\r\n      if (tarCode) res = [tarCode, tar]\r\n    }\r\n    if (typeof target === 'string') {\r\n      const tar = microAppElMap.get(target)\r\n      if (tar) res = [tarCode, tar]\r\n    }\r\n    if (!res) console.warn('getApp error,target named:', target, microAppMap)\r\n    return res\r\n  }\r\n  /**\r\n   * @description 销毁实例，取消事件监听\r\n   */\r\n  destory () {\r\n    this.__maintainCancel()\r\n    this.__pageHideCancel()\r\n    super.destory()\r\n  }\r\n\r\n  /**\r\n   * @param {microAppCode} microAppCode\r\n   * @returns {object | undefined}\r\n   */\r\n  getState (microAppCode) {\r\n    let res\r\n    res = stateMap.get(microAppCode)\r\n    return res\r\n  }\r\n  /**\r\n   *\r\n   * @param {microAppCode} microAppCode\r\n   * @param {object} state\r\n   * @returns {IStateMap}\r\n   */\r\n  setState (microAppCode, state) {\r\n    return stateMap.set(microAppCode, state)\r\n  }\r\n  /**\r\n   * @description\r\n   * @param {Channel} context\r\n   */\r\n  _configResponse (context) {\r\n    context.defaultResponseInterceptor.push(data => {\r\n      if (data?.data?.type === 'config') {\r\n        //todo 传递config\r\n        const config = JSON.parse(localStorage.getItem(this.localStorageName))\r\n        data.data.data = window[DEFAULT_GLOBAL_CONFIG] || config\r\n      }\r\n      return data\r\n    })\r\n  }\r\n\r\n  _onPassive () {\r\n    return super.on(msg => {\r\n      // todo 传递消息\r\n      if (msg.target !== 'parent' && msg.target !== this.appCode) {\r\n        console.log(\r\n          'on _onPassive---------------',\r\n          msg,\r\n          this.appCode === msg.target,\r\n          this.appCode\r\n        )\r\n        if (this.appCode === 'main') msg.pop = false\r\n        // todo 如果是main,则向上传递；如果不是，则全局传递\r\n        if (msg.target === 'main') {\r\n          if (window.parent !== window) this.send(window.parent, msg)\r\n        } else {\r\n          // todo 如果不是，则需要向sibling和parent同时传递\r\n          microAppMap.forEach((tar, tarCode) => {\r\n            if (tarCode !== msg.sourceCode) {\r\n              this.send(tar.contentWindow, msg)\r\n            }\r\n          })\r\n          if (window.parent !== window && msg.pop === true) {\r\n            this.send(window.parent, msg)\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description\r\n   * @param {Channel} context\r\n   */\r\n  _stateResponse (context) {\r\n    context.defaultResponseInterceptor.use(msg => {\r\n      if (msg.data.type === 'state') {\r\n        console.log('response state', msg)\r\n        msg.data.data = stateMap.get(msg.data.sourceCode)\r\n      }\r\n      return msg\r\n    })\r\n  }\r\n}\r\n","import { Channel } from './core/Channel'\r\nimport { SUPPORT_MESSAGE_TYPE } from './core/Channel.default'\r\n\r\n/**\r\n * @class ApplicationChannel\r\n */\r\nexport class ApplicationChannel extends Channel {\r\n  /**\r\n   * @description 新建一个目标连接频道\r\n   * @constructor\r\n   * @param { window | windowContent} target 目标上下文\r\n   * @param {ChannelOpts} options 其它参数\r\n   */\r\n  constructor (target, options) {\r\n    super(target, options)\r\n  }\r\n  /**\r\n   * @description 处理多条件参数\r\n   * @param {IPostMessageSyntax<T> & {target:HTMLIFrameElement}} msg\r\n   * @returns {Promise<IPostMessageSyntax<T>>}\r\n   */\r\n  $send (msg) {\r\n    let target\r\n    if (!msg.target || !msg.type) throw Error('message syntax error')\r\n    const msgTarget = msg.target\r\n    //todo main parent发送\r\n    if (\r\n      (msgTarget === 'main' || msgTarget === 'parent') &&\r\n      window.parent !== window\r\n    ) {\r\n      target = window.parent\r\n      return super.send(target, msg)\r\n    }\r\n    // todo如果target是HTMLIFrameElement\r\n    // todo直接发送消息，且将target自动替换为对应的appCode\r\n    const targetLike = this.getApp(msgTarget)\r\n    if (msgTarget instanceof HTMLIFrameElement && targetLike) {\r\n      msg.target = targetLike[0]\r\n      target = msgTarget.contentWindow\r\n    }\r\n    //todo 如果target是appCode则在map中找到对的HTMLIFrameElement\r\n    if (typeof msgTarget === 'string' && targetLike) {\r\n      /**@type HTMLIFrameElement */\r\n      const tar = targetLike[1]\r\n      target = tar.contentWindow\r\n    }\r\n    if (!target) console.warn('current layer target not exist')\r\n    return super.send(target, msg)\r\n  }\r\n  /**\r\n   * @param {Vue.Component} context\r\n   * @param {PostMessageType | IGenericFunction<IPostMessageSyntax<IUserData>,any>} type\r\n   * @param {IGenericFunction<IPostMessageSyntax<IUserData>,any> | IGenericFunction<IUserData,any>} cb\r\n   */\r\n  $on (context, type, cb) {\r\n    let onCancel\r\n    if (!(typeof type === 'string' || typeof type === 'function')) {\r\n      throw Error('type parma type error')\r\n    }\r\n    if (context) {\r\n      context.$on('hook:beforeDestory', () => {\r\n        onCancel?.()\r\n      })\r\n    }\r\n    if (typeof type === 'function') {\r\n      onCancel = super.on(msg => {\r\n        type(msg)\r\n      })\r\n      return onCancel\r\n    }\r\n    onCancel = super.on(msg => {\r\n      if (msg.type === type) {\r\n        cb(msg.data)\r\n      }\r\n    })\r\n    console.log('$on ----------------------', type)\r\n    return onCancel\r\n  }\r\n\r\n  /**\r\n   * @description 发送回调消息\r\n   * @param { string } target 目标应用CODE\r\n   * @param { function } cb 回调函数\r\n   * @param { object | null} params 回调函数参数\r\n   * @returns { promise }\r\n   */\r\n  sendCallback (target, cb, params) {\r\n    if (typeof cb !== 'function' || params === undefined) {\r\n      throw Error('callback or params type error')\r\n    }\r\n    if (!target) {\r\n      throw Error('missing target')\r\n    }\r\n    return this.$send({\r\n      type: 'callback',\r\n      target: target,\r\n      data: {\r\n        callback: cb.toString(),\r\n        params: params\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * @description 接收消息\r\n   * @param {IGenericFunction<Function,any>} cb 接收消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消回调的函数\r\n   */\r\n  onCallback (context, cb) {\r\n    return this.$on(context, msg => {\r\n      if (msg.type === 'callback') {\r\n        const data = msg.data\r\n        if (data.params !== null) {\r\n          const paramsName = Object.keys(data.params)\r\n          const paramsValue = Object.values(data.params)\r\n          const func = Function(\r\n            ...paramsName,\r\n            `(${data.callback})(${paramsName.join(',')})`\r\n          )\r\n          cb(function (ctx) {\r\n            func.apply(ctx, paramsValue)\r\n          })\r\n        } else {\r\n          const func = Function(`(${data.callback})()`)\r\n          cb(function (ctx) {\r\n            func.apply(ctx)\r\n          })\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description 获取远程全局配置\r\n   * @returns {Promise<object>}\r\n   */\r\n  getConfig () {\r\n    const cfg = localStorage.getItem(this.localStorageName)\r\n    if (cfg) {\r\n      const config = JSON.parse(cfg)\r\n      return Promise.resolve(config)\r\n    } else {\r\n      return this.$send({\r\n        type: 'config',\r\n        target: 'main'\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * @description 发送配置，只能以code方式发送，为了避免子应用未注册造成的消息丢失\r\n   * @param {string} microAppCode\r\n   * @param {object} state\r\n   */\r\n  sendState (microAppCode, state) {\r\n    this.setState(microAppCode, state)\r\n    return this.$send({\r\n      type: 'state',\r\n      target: microAppCode,\r\n      data: state\r\n    })\r\n  }\r\n  /**\r\n   * @description 接收消息 T为消息的具体格式\r\n   * @template T\r\n   * @param {IGenericFunction<T,any>} cb 接收消息的回调函数\r\n   * @param { Vue.Component } context 组件上下文\r\n   * @returns {cancelCallback} 取消回调的函数\r\n   */\r\n  onState (cb, context) {\r\n    this.$send({\r\n      target: 'parent',\r\n      type: 'state'\r\n    }).then(res => cb(res.data))\r\n    return this.$on(context, msg => {\r\n      if (msg.type === 'state') {\r\n        const data = msg.data\r\n        cb(data)\r\n      }\r\n    })\r\n  }\r\n}\r\n","var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\"iframe\", {\n    ref: \"window\",\n    staticClass: \"gislife-micro-app\",\n    class: _vm.classNmae,\n    attrs: { title: _vm.id, src: _vm.src, id: _vm.id },\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n\t<iframe\r\n\t\t:title=\"id\"\r\n\t\t:src=\"src\"\r\n\t\t:id=\"id\"\r\n\t\tclass=\"gislife-micro-app\"\r\n\t\t:class=\"classNmae\"\r\n\t\tref=\"window\"\r\n\t>\r\n\t</iframe>\r\n</template>\r\n\r\n<script>\r\nimport { requestDom } from './util'\r\n\r\nexport default {\r\n\tname: \"microApp\",\r\n\tinheritAttrs: false,\r\n\tprops: {\r\n\t\tsrc: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tmicroAppCode: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true,\r\n\t\t},\r\n\t\tstate: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tclassNmae: String\r\n\t},\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tid: 'gislife-' + this.microAppCode\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tstate: {\r\n\t\t\tdeep: true,\r\n\t\t\timmediate: true,\r\n\t\t\tasync handler (val) {\r\n\t\t\t\tawait requestDom(this.id,(el) => el && el.contentWindow)\r\n\t\t\t\t/**@type ConnectChannel */\r\n\t\t\t\tconst connector = this.$connector;\r\n\t\t\t\tconnector.sendState(this.microAppCode,val)\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tbeforeDestroy () {\r\n\t\tthis.$connector.unRegisterApp(this.microAppCode)\r\n\t},\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n.gislife-micro-app {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=script&lang=js&\"","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-2.use[1]!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-2.use[1]!../node_modules/css-loader/dist/cjs.js!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../node_modules/vue-loader/lib/index.js??vue-loader-options!./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./microApp.vue?vue&type=template&id=54c7b0c4&\"\nimport script from \"./microApp.vue?vue&type=script&lang=js&\"\nexport * from \"./microApp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./microApp.vue?vue&type=style&index=0&id=54c7b0c4&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent(\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */,\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options =\n    typeof scriptExports === 'function' ? scriptExports.options : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) {\n    // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n          injectStyles.call(\n            this,\n            (options.functional ? this.parent : this).$root.$options.shadowRoot\n          )\n        }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import * as Utils from './util'\r\nimport { ApplicationChannel } from './ApplicationChannel'\r\nimport microAppVue from './microApp.vue'\r\n\r\n/**\r\n * @typedef ParamsType\r\n * @type {object}\r\n * @property {string} appCode\r\n * @property {string} microAppCode\r\n */\r\n\r\nconst connector = new ApplicationChannel()\r\nexport { Utils, connector }\r\nexport default {\r\n  install (vue) {\r\n    if (window.parent !== window) {\r\n      // TODO 获取子应用AppCode\r\n      /**@type ParamsType */\r\n      const params = Utils.getParams(window.location)\r\n      // ! 子应用\r\n      connector.setAppCode(params.microAppCode)\r\n    } else {\r\n      // ! 主应用\r\n      connector.setAppCode('main')\r\n    }\r\n    Object.defineProperty(vue.prototype, '$connector', {\r\n      get () {\r\n        return connector\r\n      },\r\n      set (v) {\r\n        throw Error(\"$connector can't set value\")\r\n      }\r\n    })\r\n    vue.component(microAppVue.name, microAppVue)\r\n  }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","self","stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","needLayer","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","getParams","location","search","slice","split","map","p","forEach","onPageHide","cb","console","log","addEventListener","removeEventListener","onLoad","onMessage","requestDom","resolver","judgeCb","arguments","el","Boolean","type","getDom","callback","requestAnimationFrame","getElementById","setTimeout","Promise","resolve","ChainRunner","_ArrayVolume","_inherits","_super","_classCallCheck","_createClass","priority","_get","_getPrototypeOf","this","queue","reduce","acc","cur","ArrayVolume","Array","_this","unshift","findIndex","fn","randomUUID","crypto","bind","getRandomValues","rnds8","Uint8Array","rng","byteToHex","toString","buf","offset","rnds","random","arr","toLowerCase","unsafeStringify","Message","targetWindow","targetOrigin","timeout","tag","namespace","defaultResponseInterceptor","requestInterceptor","_cancel","_initResponse","_e$data","data","response","source","postMessage","_objectSpread","run","origin","msg","_this2","isSendOK","resolvor","rejector","uuidv4","cancel","res","belong","reject","_postMessage","then","err","_this3","event","_event$data","_event$data2","DEFAULT_GLOBAL_CONFIG","test","microAppMap","Map","microAppElMap","WeakMap","stateMap","Channel","_Message","appCode","localStorageName","_configResponse","_assertThisInitialized","_stateResponse","val","_this$__pageHideCance","_this$__maintainCance","__pageHideCancel","__maintainCancel","parent","send","localStorage","setItem","on","microAppCode","sourceCode","registerApp","error","__cancelPassive","_onPassive","pop","sibling","contentWindow","all","tar","_this4","has","set","tarCode","warn","state","context","_this5","_data$data","config","parse","getItem","_this6","use","ApplicationChannel","_Channel","msgTarget","targetLike","getApp","onCancel","$on","_onCancel","params","$send","paramsName","keys","paramsValue","values","func","Function","join","ctx","cfg","setState","render","_vm","_c","_self","ref","staticClass","class","classNmae","attrs","title","src","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","record","_typeof","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","object","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_withStripped","inheritAttrs","props","String","required","watch","deep","immediate","handler","_callee","_context","$connector","sendState","args","beforeDestroy","unRegisterApp","component","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_injectStyles","originalRender","h","existing","beforeCreate","connector","install","vue","Utils","setAppCode","v","microAppVue"],"sourceRoot":""}